{"id":"task_templating-8ua","title":"Task Graph: M1 - Project Setup","status":"closed","priority":0,"issue_type":"epic","owner":"riabtchuk@gmail.com","created_at":"2026-02-01T01:49:20.388823Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:56.527479Z","closed_at":"2026-02-01T01:53:56.527479Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"]}
{"id":"task_templating-8ua.1","title":"Create Go project structure and initialize module with dependencies","description":"A Go module is initialized at the repository root with the directory structure cmd/aqe/, internal/{cli,docling,chunker,claude,search,store,harvard,models}/, scripts/, tests/{contract,integration,unit}/, and all required Go dependencies installed.\n\n## Inputs\n- **plan_md** (`filepath`): file exists -- Source: specs/001-quote-extractor-cli/plan.md project structure section\n\n## Outputs\n- **go_mod** (`filepath`): valid Go module file -- Dest: go.mod at project root\n- **directory_tree** (`list\u003cfilepath\u003e`): all directories exist -- Dest: Filesystem directories\n\n## Constraints\n- Module path must follow Go conventions\n- Python limited to scripts/ directory per project constitution\n","acceptance_criteria":"- go.mod exists with module path github.com/[org]/aqe\n- Directory cmd/aqe/ exists\n- Directories internal/cli/, internal/docling/, internal/chunker/, internal/claude/, internal/search/, internal/store/, internal/harvard/, internal/models/ all exist\n- Directory scripts/ exists\n- Directories tests/contract/, tests/integration/, tests/unit/ all exist\n- go.sum lists github.com/spf13/cobra, github.com/weaviate/weaviate-go-client/v4, github.com/mattn/go-sqlite3, github.com/stretchr/testify\n- scripts/requirements.txt exists with docling\u003e=2.70.0","notes":"Covers tasks T001-T003 and T007 from tasks.md. Directory creation is trivial but establishing the module is foundational.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:21.105607Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.393988Z","closed_at":"2026-02-01T01:53:45.393988Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.1","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:21.107928Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.10","title":"Create CLI root command with global flags and main entry point","description":"The aqe CLI application has a root command with --db and --debug global flags, and a main.go entry point that calls cli.Execute(), producing a runnable binary.\n\n## Inputs\n- **cobra_library** (`string`): none -- Source: github.com/spf13/cobra dependency\n\n## Outputs\n- **cli_files** (`list\u003cfilepath\u003e`): compilable Go source -- Dest: internal/cli/ and cmd/aqe/\n\n## Constraints\n- Must use github.com/spf13/cobra for CLI framework\n- All subcommands registered in the root command\n- --db flag accessible to all subcommands via persistent flag\n","acceptance_criteria":"- Root command defined in internal/cli/root.go with --db flag defaulting to ./quotes.db\n- Root command has --debug flag for verbose output\n- cmd/aqe/main.go calls cli.Execute() as the entry point\n- go build -o aqe ./cmd/aqe compiles successfully\n- ./aqe --help displays usage information with available subcommands\n- ./aqe with no arguments displays help text and exits 0","notes":"Covers tasks T051-T053 from tasks.md. Subcommand implementations are separate tasks.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:27.821999Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.462607Z","closed_at":"2026-02-01T01:53:45.462607Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.10","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:27.824385Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.10","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:46.664115Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.11","title":"Implement SQLite Store struct with connection management and transaction helper","description":"A Store struct wraps an SQLite database connection, supports opening/closing the database, running migrations on startup, and provides a WithTx() helper for transactional operations.\n\n## Inputs\n- **db_path** (`filepath`): parent directory must exist -- Source: CLI --db flag, default ./quotes.db\n\n## Outputs\n- **store_file** (`filepath`): compilable Go source -- Dest: internal/store/sqlite.go\n\n## Constraints\n- Must use github.com/mattn/go-sqlite3 driver (CGO required)\n- Database file created if not exists\n- Foreign keys pragma must be enabled on every connection\n","acceptance_criteria":"- NewStore(dbPath) opens or creates an SQLite database file at the given path\n- NewStore automatically runs migrations (creates tables if not exist)\n- Store.Close() closes the database connection without error\n- Store.WithTx(fn) executes fn within a transaction, commits on success, rolls back on error\n- WithTx returns the error from fn if fn fails\n- Opening a Store with an empty path returns an error","notes":"Covers tasks T013-T015 from tasks.md.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:28.515886Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.468781Z","closed_at":"2026-02-01T01:53:45.468781Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.11","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:28.522138Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.11","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:47.324945Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.11","depends_on_id":"task_templating-8ua.4","type":"blocks","created_at":"2026-02-01T01:49:47.972087Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.12","title":"Write contract tests for Docling, Weaviate schema, and Ollama services","description":"Contract tests verify that Docling health/convert endpoints, Weaviate schema creation and chunk insertion, and Ollama model availability all conform to their API contracts.\n\n## Inputs\n- **running_services** (`string`): Docker services must be running -- Source: docker-compose up -d\n\n## Outputs\n- **test_files** (`list\u003cfilepath\u003e`): compilable Go test files -- Dest: tests/contract/\n\n## Constraints\n- Tests require Docker services to be running\n- Tests should clean up after themselves (delete test data)\n- Use testify/assert for assertions\n","acceptance_criteria":"- TestDoclingHealth verifies GET /health returns 200 with status healthy\n- TestDoclingConvertPDF verifies POST /v1/convert/file with a PDF returns texts[] with self_ref and prov\n- TestDoclingConvertDOCX verifies POST /v1/convert/file with a DOCX returns texts[] with self_ref and prov\n- TestWeaviateSchemaCreation verifies the Chunk class can be created and retrieved\n- TestWeaviateInsertChunk verifies a chunk can be inserted with auto-embedding generation\n- TestOllamaModelAvailable verifies nomic-embed-text appears in GET /api/tags model list","notes":"Covers tasks T054-T059 from tasks.md. All contract tests are independent and can run in parallel.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:29.200219Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.474616Z","closed_at":"2026-02-01T01:53:45.474616Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.12","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:29.202414Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.12","depends_on_id":"task_templating-8ua.2","type":"blocks","created_at":"2026-02-01T01:49:48.634852Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.12","depends_on_id":"task_templating-8ua.5","type":"blocks","created_at":"2026-02-01T01:49:49.327003Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.12","depends_on_id":"task_templating-8ua.6","type":"blocks","created_at":"2026-02-01T01:49:50.061728Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.13","title":"Write comprehensive unit tests for Harvard reference formatter","description":"Unit tests cover all Harvard formatting functions including author formatting (1, 2, 3+ authors), in-text citations, book, journal article, website, and chapter formats with DOI/URL inclusion.\n\n## Inputs\n- **harvard_implementation** (`string`): Harvard formatter must be implemented -- Source: internal/harvard/ package\n\n## Outputs\n- **test_file** (`filepath`): compilable Go test file -- Dest: tests/unit/harvard_test.go\n\n## Constraints\n- Use testify/assert for assertions\n- Test both happy path and edge cases (missing fields, empty authors)\n","acceptance_criteria":"- TestFormatAuthors verifies single author, two authors (with 'and'), three+ authors (with 'et al.')\n- TestFormatInText verifies in-text citation format (Author, Year, p. X) for all author counts\n- TestFormatBook verifies full reference with and without DOI per FR-006a\n- TestFormatJournalArticle verifies full reference with volume, issue, pages, and DOI per FR-006a\n- TestFormatWebsite verifies URL inclusion and US date format\n- TestFormatChapter verifies editor, book title, and page range formatting\n- All tests pass with go test ./tests/unit/ -run Harvard","notes":"Covers tasks T118-T121 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:29.906725Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.480416Z","closed_at":"2026-02-01T01:53:45.480416Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.13","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:29.909104Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.13","depends_on_id":"task_templating-8ua.9","type":"blocks","created_at":"2026-02-01T01:49:50.760269Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.14","title":"Add debug logging for Docling, Weaviate, and Claude requests when --debug flag is set","description":"When --debug is passed to any command, the application logs detailed request/response information for Docling HTTP calls, Weaviate queries, and Claude CLI prompts to stderr.\n\n## Inputs\n- **debug_flag** (`bool`): none -- Source: Global --debug CLI flag\n\n## Outputs\n- **debug_output** (`string`): written to stderr only when debug=true -- Dest: stderr\n\n## Constraints\n- Debug output must go to stderr only\n- No debug logging visible in normal operation\n- Must not log sensitive data (API keys, etc.)\n","acceptance_criteria":"- Docling client logs request URL, response status, and response size when --debug is set\n- Weaviate client logs GraphQL queries and result counts when --debug is set\n- Claude wrapper logs the full prompt and raw response when --debug is set\n- No debug output appears when --debug is not set\n- Debug output goes to stderr, not stdout (preserves pipe-safe output)","notes":"Covers tasks T125-T127 from tasks.md.","status":"closed","priority":3,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:30.617379Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.487217Z","closed_at":"2026-02-01T01:53:45.487217Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.14","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:30.632172Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.14","depends_on_id":"task_templating-8ua.5","type":"blocks","created_at":"2026-02-01T01:49:51.463098Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.14","depends_on_id":"task_templating-8ua.6","type":"blocks","created_at":"2026-02-01T01:49:52.160194Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.14","depends_on_id":"task_templating-8ua.8","type":"blocks","created_at":"2026-02-01T01:49:52.897509Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.14","depends_on_id":"task_templating-8ua.10","type":"blocks","created_at":"2026-02-01T01:49:53.6193Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.15","title":"Implement store operations for document ingestion workflow","description":"The Store provides CalculateChecksum, InsertDocument, GetDocumentByChecksum, InsertChunk, and InsertChunks methods that support the full document ingestion workflow including duplicate detection.\n\n## Inputs\n- **file_bytes** (`bytes`): non-empty -- Source: Document file read from disk\n\n## Outputs\n- **document_id** (`int`): id \u003e 0 -- Dest: Return value from InsertDocument()\n\n## Constraints\n- Checksum uses SHA-256 for consistency with FR-011\n- Batch insert must use transaction for atomicity\n- Authors field must be stored as JSON array string\n","acceptance_criteria":"- CalculateChecksum(filepath) returns SHA-256 hex digest of file contents\n- InsertDocument(doc) marshals authors to JSON and returns the new document ID\n- GetDocumentByChecksum(checksum) returns the document if found, nil if not found\n- InsertChunk(chunk) inserts a single chunk with all fields\n- InsertChunks(chunks) batch-inserts chunks within a single transaction\n- InsertChunks rolls back all inserts if any single insert fails\n- Inserting a document with duplicate checksum returns a unique constraint error","notes":"Covers tasks T060-T064 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:31.320448Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.495301Z","closed_at":"2026-02-01T01:53:45.495301Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.15","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:31.324221Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.15","depends_on_id":"task_templating-8ua.11","type":"blocks","created_at":"2026-02-01T01:49:54.310397Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.15","depends_on_id":"task_templating-8ua.3","type":"blocks","created_at":"2026-02-01T01:49:54.984669Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.16","title":"Implement store operations for quote extraction workflow","description":"The Store provides HybridSearch on Weaviate, GetChunksByIDs, GetChunksWithDocuments join, InsertExtraction, and InsertExtractedQuotes methods supporting the full extraction workflow.\n\n## Inputs\n- **query** (`string`): len \u003e 0 -- Source: User research topic\n\n## Outputs\n- **extraction_id** (`int`): id \u003e 0 -- Dest: Return value from InsertExtraction()\n\n## Constraints\n- Hybrid search alpha defaults to 0.5 (balanced BM25/vector)\n- Default search limit is 50 candidates before LLM scoring\n- Batch insert of quotes must be transactional\n","acceptance_criteria":"- WeaviateClient.HybridSearch(query, limit, alpha=0.5) returns ranked ChunkResult list with scores\n- HybridSearch uses BM25 + vector hybrid with configurable alpha parameter\n- Store.GetChunksByIDs(ids) returns chunk records matching the provided IDs\n- Store.GetChunksWithDocuments(ids) returns chunks joined with their parent document metadata\n- Store.InsertExtraction(topic) creates extraction record and returns its ID\n- Store.InsertExtractedQuotes(quotes) batch-inserts quotes within a transaction","notes":"Covers tasks T081-T085 from tasks.md. HybridSearch is the key new Weaviate method.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:32.050944Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:50.802186Z","closed_at":"2026-02-01T01:53:50.802186Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.16","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:32.054199Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.16","depends_on_id":"task_templating-8ua.11","type":"blocks","created_at":"2026-02-01T01:49:55.704679Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.16","depends_on_id":"task_templating-8ua.6","type":"blocks","created_at":"2026-02-01T01:49:56.405929Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.16","depends_on_id":"task_templating-8ua.3","type":"blocks","created_at":"2026-02-01T01:49:57.08183Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.17","title":"Implement store operations for extraction export workflow","description":"The Store provides GetExtractionByID, GetQuotesByExtractionID (with chunk/document join), and ListExtractions methods supporting the export workflow.\n\n## Inputs\n- **extraction_id** (`int`): id \u003e 0 -- Source: CLI positional argument\n\n## Outputs\n- **extraction_data** (`string`): includes quotes with chunk text and document metadata -- Dest: Return value from GetQuotesByExtractionID()\n\n## Constraints\n- Join must include both chunk and document data for reference formatting\n- ListExtractions includes quote count per extraction\n","acceptance_criteria":"- GetExtractionByID(id) returns the extraction record or nil if not found\n- GetQuotesByExtractionID(id) returns quotes joined with chunk text and parent document metadata\n- Join query includes document.title, document.authors, document.year, chunk.text, chunk.page_num\n- ListExtractions() returns all extractions ordered by created_at descending","notes":"Covers tasks T098-T100 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:32.7631Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:50.942081Z","closed_at":"2026-02-01T01:53:50.942081Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.17","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:32.765546Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.17","depends_on_id":"task_templating-8ua.11","type":"blocks","created_at":"2026-02-01T01:49:57.792269Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.17","depends_on_id":"task_templating-8ua.3","type":"blocks","created_at":"2026-02-01T01:49:58.458415Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.18","title":"Implement the aqe meta fix command for interactive metadata correction","description":"The aqe meta fix command queries for documents with incomplete metadata (missing author, title, or year), prompts the user interactively for each missing field, and updates the records in SQLite.\n\n## Inputs\n- **user_input** (`string`): interactive stdin -- Source: User keyboard input\n\n## Outputs\n- **confirmation** (`string`): non-empty -- Dest: stdout\n\n## Constraints\n- Interactive prompts read from stdin\n- Meta command is a command group; fix is a subcommand\n","acceptance_criteria":"- Store.GetDocumentsWithIncompleteMetadata() returns documents where title, authors, or year is NULL\n- Store.UpdateDocumentMetadata(id, fields) updates specified fields for a document\n- aqe meta fix displays each document with missing fields and prompts for input\n- User can press Enter to skip a field\n- After providing metadata, system confirms 'Updated: filename.pdf'\n- When all documents have complete metadata, system displays 'All documents have complete metadata.'","notes":"Covers tasks T110-T115 from tasks.md. Lower priority than core extraction workflow.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:33.447833Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.082784Z","closed_at":"2026-02-01T01:53:51.082784Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.18","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:33.450257Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.18","depends_on_id":"task_templating-8ua.10","type":"blocks","created_at":"2026-02-01T01:49:59.158791Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.18","depends_on_id":"task_templating-8ua.11","type":"blocks","created_at":"2026-02-01T01:49:59.831124Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.18","depends_on_id":"task_templating-8ua.3","type":"blocks","created_at":"2026-02-01T01:50:00.498679Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.19","title":"Write contract tests for Weaviate hybrid search and Claude output format","description":"Contract tests verify that Weaviate hybrid search returns ranked results with scores and that Claude output conforms to the expected JSON structure with chunk IDs.\n\n## Inputs\n- **running_services** (`string`): Docker services and Claude CLI must be available -- Source: docker-compose up -d and claude CLI installed\n\n## Outputs\n- **test_files** (`list\u003cfilepath\u003e`): compilable Go test files -- Dest: tests/contract/\n\n## Constraints\n- Hybrid search test requires seeded data in Weaviate\n- Claude test requires the Claude CLI to be installed and authenticated\n","acceptance_criteria":"- TestWeaviateHybridSearch verifies that hybrid search returns results with score field populated\n- TestWeaviateHybridSearch verifies results are ranked by descending score\n- TestClaudeOutputFormat verifies Claude returns valid JSON with selected_chunks array\n- TestClaudeOutputFormat verifies each selected chunk has chunk_id, relevance (int), and explanation (string)","notes":"Covers tasks T079-T080 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:34.156893Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.226663Z","closed_at":"2026-02-01T01:53:51.226663Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.19","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:34.159379Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.19","depends_on_id":"task_templating-8ua.12","type":"blocks","created_at":"2026-02-01T01:50:01.171158Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.19","depends_on_id":"task_templating-8ua.8","type":"blocks","created_at":"2026-02-01T01:50:01.858257Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.2","title":"Create docker-compose.yml with Docling, Weaviate, and Ollama services","description":"A docker-compose.yml defines three services (Docling-serve on port 5001, Weaviate on port 8080 with text2vec-ollama module, Ollama on port 11434) that start successfully with docker-compose up -d.\n\n## Inputs\n- **service_specs** (`string`): none -- Source: plan.md technical context section and contracts/\n\n## Outputs\n- **docker_compose** (`filepath`): valid docker-compose YAML -- Dest: docker-compose.yml at project root\n\n## Constraints\n- Weaviate must use text2vec-ollama module, not text2vec-openai\n- All services must be on the same Docker network for inter-service communication\n- Persistent volumes for Weaviate data and Docling model cache\n","acceptance_criteria":"- docker-compose.yml defines service 'docling' using image quay.io/docling-project/docling-serve:latest on port 5001\n- docker-compose.yml defines service 'weaviate' using image cr.weaviate.io/semitechnologies/weaviate:1.27.0 on port 8080\n- Weaviate service has DEFAULT_VECTORIZER_MODULE set to text2vec-ollama\n- Weaviate service has ENABLE_MODULES including text2vec-ollama\n- Weaviate service has OLLAMA_API_ENDPOINT set to http://ollama:11434\n- docker-compose.yml defines service 'ollama' using image ollama/ollama:latest on port 11434\n- docker-compose config validates without errors","notes":"Covers tasks T004-T006 from tasks.md. Services can be created in parallel within the compose file.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:21.822437Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.403819Z","closed_at":"2026-02-01T01:53:45.403819Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.2","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:21.82589Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.20","title":"Implement the aqe ingest command with full ingestion pipeline","description":"The aqe ingest command accepts a file or directory path, processes PDF/DOCX/TXT files through Docling parsing, Python chunking, SQLite storage, and Weaviate indexing, with duplicate detection, resume capability, progress output, and error handling.\n\n## Inputs\n- **path** (`filepath`): file or directory must exist -- Source: Positional CLI argument\n- **title** (`option\u003cstring\u003e`): none -- Source: CLI flag --title\n- **author** (`option\u003cstring\u003e`): none -- Source: CLI flag --author\n- **year** (`option\u003cint\u003e`): year \u003e 0 -- Source: CLI flag --year\n\n## Outputs\n- **summary** (`string`): non-empty -- Dest: stdout\n\n## Constraints\n- Must call Docling for parsing, Python chunker for chunking, store for SQLite, Weaviate for indexing\n- Duplicate detection via SHA-256 checksum before processing\n- Verbatim chunk text stored in SQLite as source of truth\n- Embedding IDs from Weaviate stored back in SQLite chunks\n","acceptance_criteria":"- aqe ingest ./sources/ processes all PDF, DOCX, and TXT files in the directory\n- aqe ingest document.pdf --title 'Title' --author 'Author' --year 2023 uses provided metadata overrides\n- Unsupported file types are skipped with a warning message to stderr\n- Duplicate files (matching checksum) are skipped with message 'Skipping: filename (already ingested)'\n- Batch resume: re-running ingest on a partially-processed directory continues from where it left off per FR-011a\n- Each file shows progress: 'Processing: filename.pdf' and 'Chunks: N'\n- Final output shows 'Ingested N documents, M chunks'\n- Service unavailable (Docling not running) produces a clear error message with remediation steps\n- Corrupted or unreadable files report errors and continue processing remaining files\n- Exit code 0 on success, non-zero on failure","notes":"Covers tasks T065-T076 from tasks.md. This is the most complex command, orchestrating all external services.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":480,"created_at":"2026-02-01T01:49:34.836187Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.371454Z","closed_at":"2026-02-01T01:53:51.371454Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.20","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:34.838316Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.20","depends_on_id":"task_templating-8ua.10","type":"blocks","created_at":"2026-02-01T01:50:02.63217Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.20","depends_on_id":"task_templating-8ua.5","type":"blocks","created_at":"2026-02-01T01:50:03.641506Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.20","depends_on_id":"task_templating-8ua.7","type":"blocks","created_at":"2026-02-01T01:50:04.332709Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.20","depends_on_id":"task_templating-8ua.6","type":"blocks","created_at":"2026-02-01T01:50:04.998111Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.20","depends_on_id":"task_templating-8ua.15","type":"blocks","created_at":"2026-02-01T01:50:05.623284Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.21","title":"Write unit tests for SQLite store CRUD operations and constraints","description":"Unit tests cover document CRUD, chunk CRUD, checksum uniqueness enforcement, and metadata update operations using an in-memory SQLite database.\n\n## Inputs\n- **store_implementation** (`string`): Store must be implemented -- Source: internal/store/ package\n\n## Outputs\n- **test_file** (`filepath`): compilable Go test file -- Dest: tests/unit/store_test.go\n\n## Constraints\n- Tests must be self-contained using in-memory database\n- Use testify/assert for assertions\n- Each test must set up and tear down its own data\n","acceptance_criteria":"- TestDocumentCRUD verifies insert, get by ID, get by checksum, and list operations\n- TestChunkCRUD verifies insert, get by ID, get by document ID, and batch insert\n- TestChecksumUniqueness verifies that inserting two documents with same checksum fails\n- TestMetadataUpdate verifies UpdateDocumentMetadata changes specified fields\n- All tests use in-memory SQLite (:memory:) for isolation\n- All tests pass with go test ./tests/unit/ -run Store","notes":"Covers tasks T122-T124 and T116 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:35.531172Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.534728Z","closed_at":"2026-02-01T01:53:51.534728Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.21","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:35.533318Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.21","depends_on_id":"task_templating-8ua.11","type":"blocks","created_at":"2026-02-01T01:50:06.351982Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.21","depends_on_id":"task_templating-8ua.15","type":"blocks","created_at":"2026-02-01T01:50:07.036891Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.22","title":"Implement the aqe export command with Markdown, JSON, and BibTeX formatters","description":"The aqe export command retrieves a saved extraction by ID and outputs it to stdout or a file in Markdown (with blockquotes, citations, bibliography), JSON (valid and parseable), or BibTeX format.\n\n## Inputs\n- **extraction_id** (`int`): id \u003e 0 -- Source: Positional CLI argument\n- **format** (`string`): format IN [\"markdown\", \"json\", \"bibtex\"] -- Source: CLI flag --format, default markdown\n- **output_path** (`option\u003cfilepath\u003e`): parent directory must exist if provided -- Source: CLI flag --output\n\n## Outputs\n- **formatted_output** (`string`): non-empty, valid for chosen format -- Dest: stdout or file specified by --output\n\n## Constraints\n- Output to stdout by default; --output flag writes to file\n- Harvard references must be correctly formatted in all output formats\n- JSON must be well-formatted with proper indentation\n","acceptance_criteria":"- aqe export 1 --format markdown outputs blockquotes with citations and a bibliography section\n- Markdown output renders correctly in GitHub, VS Code, and Obsidian per SC-007\n- aqe export 1 --format json outputs valid JSON parseable by jq per SC-006\n- JSON output contains fields: topic, extracted_at, quotes[], bibliography[]\n- aqe export 1 --format bibtex outputs valid BibTeX with entries for all cited sources\n- BibTeX generates citation keys from author and year\n- aqe export 999 (invalid ID) shows error with list of available extraction IDs\n- aqe export 1 --format markdown --output quotes.md writes to file instead of stdout\n- Default format (no flag) is markdown","notes":"Covers tasks T101-T107 from tasks.md. Three formatters can be implemented in parallel.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:36.219508Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.701885Z","closed_at":"2026-02-01T01:53:51.701885Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.22","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:36.222421Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.22","depends_on_id":"task_templating-8ua.10","type":"blocks","created_at":"2026-02-01T01:50:07.759216Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.22","depends_on_id":"task_templating-8ua.17","type":"blocks","created_at":"2026-02-01T01:50:08.528912Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.22","depends_on_id":"task_templating-8ua.9","type":"blocks","created_at":"2026-02-01T01:50:09.250215Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.23","title":"Implement the aqe list command to display saved extractions","description":"The aqe list command displays all saved extraction sessions with their IDs, topics, timestamps, and quote counts in a formatted table.\n\n## Inputs\n- **db_path** (`filepath`): database must exist -- Source: Global --db flag\n\n## Outputs\n- **extraction_list** (`string`): formatted table output -- Dest: stdout\n\n## Constraints\n- Read-only operation\n- Table formatting must be readable in standard terminal widths\n","acceptance_criteria":"- aqe list displays extraction ID, topic, date, and quote count for each saved extraction\n- Output is formatted as an aligned table\n- Empty database shows 'No extractions found. Run aqe extract first.'\n- Extractions are sorted by most recent first","notes":"Covers task T117 from tasks.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T01:49:36.937891Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.839338Z","closed_at":"2026-02-01T01:53:51.839338Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.23","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:36.941254Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.23","depends_on_id":"task_templating-8ua.10","type":"blocks","created_at":"2026-02-01T01:50:09.942181Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.23","depends_on_id":"task_templating-8ua.17","type":"blocks","created_at":"2026-02-01T01:50:10.698814Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.24","title":"Implement the aqe extract command with search, LLM scoring, and persistence","description":"The aqe extract command searches Weaviate for relevant chunks, sends them to Claude for relevance scoring, validates responses, filters by threshold, persists results, and displays quotes with Harvard in-text citations.\n\n## Inputs\n- **topic** (`string`): len \u003e 0 -- Source: Positional CLI argument\n- **max_quotes** (`int`): max_quotes \u003e 0 -- Source: CLI flag --max-quotes, default 20\n- **min_relevance** (`int`): 0 \u003c= min_relevance \u003c= 100 -- Source: CLI flag --min-relevance, default 60\n\n## Outputs\n- **extraction_display** (`string`): non-empty on success -- Dest: stdout\n\n## Constraints\n- All quote text MUST come from SQLite chunks.text, never from Claude response\n- Claude returns only chunk IDs - system retrieves verbatim text separately\n- Chunk ID validation must happen before any quote is included in output\n","acceptance_criteria":"- aqe extract 'topic' retrieves top 50 candidates from Weaviate hybrid search\n- Candidates are sent to Claude with chunk text, IDs, page numbers, and section paths\n- Claude response chunk_ids are validated against known corpus IDs\n- Invalid chunk_ids from Claude are logged and skipped\n- Results are filtered by --min-relevance threshold (default 60)\n- Results are limited to --max-quotes count (default 20)\n- Extraction and quotes are persisted to SQLite\n- Output displays each quote with verbatim text, Harvard in-text citation, relevance score, and explanation\n- Output ends with 'Saved as extraction #N. Export with: aqe export N'\n- Empty corpus produces 'No documents ingested. Run aqe ingest first.'\n- No relevant quotes produces informative message","notes":"Covers tasks T086-T095 from tasks.md. This is the core value proposition - deterministic quote retrieval.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":480,"created_at":"2026-02-01T01:49:37.673744Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:51.981698Z","closed_at":"2026-02-01T01:53:51.981698Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.24","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:37.678421Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.24","depends_on_id":"task_templating-8ua.10","type":"blocks","created_at":"2026-02-01T01:50:11.593083Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.24","depends_on_id":"task_templating-8ua.16","type":"blocks","created_at":"2026-02-01T01:50:12.330588Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.24","depends_on_id":"task_templating-8ua.8","type":"blocks","created_at":"2026-02-01T01:50:12.990455Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.24","depends_on_id":"task_templating-8ua.9","type":"blocks","created_at":"2026-02-01T01:50:13.634547Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.24","depends_on_id":"task_templating-8ua.20","type":"blocks","created_at":"2026-02-01T01:50:14.297622Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.25","title":"Write integration tests for document ingestion end-to-end flow","description":"Integration tests verify the full ingestion pipeline (parse, chunk, store, index) and duplicate detection using live Docker services.\n\n## Inputs\n- **running_services** (`string`): All Docker services must be running -- Source: docker-compose up -d\n\n## Outputs\n- **test_file** (`filepath`): compilable Go test file with integration build tag -- Dest: tests/integration/ingest_test.go\n\n## Constraints\n- Requires Docker services running (Docling, Weaviate, Ollama)\n- Must use //go:build integration tag\n- Tests must not leave residual data\n","acceptance_criteria":"- TestIngestSinglePDF ingests a test PDF and verifies document record in SQLite, chunks in SQLite, and chunks in Weaviate\n- TestIngestDuplicateDetection ingests same file twice and verifies second attempt is skipped\n- Tests are tagged with //go:build integration\n- Tests clean up ingested data after completion","notes":"Covers tasks T077-T078 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:38.450621Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:52.129191Z","closed_at":"2026-02-01T01:53:52.129191Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.25","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:38.453388Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.25","depends_on_id":"task_templating-8ua.20","type":"blocks","created_at":"2026-02-01T01:50:14.97429Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.25","depends_on_id":"task_templating-8ua.12","type":"blocks","created_at":"2026-02-01T01:50:15.659328Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.26","title":"Implement consistent exit codes across all CLI commands","description":"All CLI commands exit with code 0 on success, 1 on user error, and 2 on system error, with meaningful error messages distinguishing error types per FR-012 and FR-013.\n\n## Inputs\n- **error_type** (`string`): user_error or system_error -- Source: Error handling in all commands\n\n## Outputs\n- **exit_code** (`int`): exit_code IN [0, 1, 2] -- Dest: Process exit code\n\n## Constraints\n- Must be consistent across all commands\n- User-facing messages via stderr per research.md error handling strategy\n","acceptance_criteria":"- Success cases exit with code 0\n- User errors (invalid file path, unsupported format, invalid extraction ID) exit with code 1\n- System errors (service unavailable, database corruption) exit with code 2\n- Error messages clearly distinguish user errors from system errors\n- Error messages include actionable remediation steps for system errors","notes":"Covers task T128 from tasks.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:39.202873Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:52.389198Z","closed_at":"2026-02-01T01:53:52.389198Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.26","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:39.205472Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.26","depends_on_id":"task_templating-8ua.20","type":"blocks","created_at":"2026-02-01T01:50:16.332881Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.26","depends_on_id":"task_templating-8ua.24","type":"blocks","created_at":"2026-02-01T01:50:17.136224Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.26","depends_on_id":"task_templating-8ua.22","type":"blocks","created_at":"2026-02-01T01:50:17.887255Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.27","title":"Validate performance criteria SC-001 and SC-002 on target hardware","description":"Performance tests confirm that 100-page PDF ingestion completes in under 60 seconds and quote extraction from 10 documents completes in under 10 seconds on Apple M1/M2 or equivalent hardware.\n\n## Inputs\n- **test_documents** (`list\u003cfilepath\u003e`): includes one 100-page PDF and 10 varied documents -- Source: Test document corpus\n\n## Outputs\n- **performance_report** (`string`): timings for SC-001 and SC-002 -- Dest: Performance results documented\n\n## Constraints\n- Baseline hardware: Apple M1/M2 or equivalent x86_64, 16GB RAM, SSD\n- SC-002 measured with warm cache (models already loaded)\n- Docker services must be running locally, not remotely\n","acceptance_criteria":"- SC-001: Ingesting a 100-page PDF completes in under 60 seconds on Apple M1/M2 or equivalent with 16GB RAM\n- SC-002: Extracting quotes from 10 ingested documents completes in under 10 seconds with warm cache\n- Results documented with hardware specs and actual timings","notes":"Covers tasks T137-T138 from tasks.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:39.929356Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:52.538223Z","closed_at":"2026-02-01T01:53:52.538223Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.27","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:39.931653Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.27","depends_on_id":"task_templating-8ua.20","type":"blocks","created_at":"2026-02-01T01:50:18.643524Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.27","depends_on_id":"task_templating-8ua.24","type":"blocks","created_at":"2026-02-01T01:50:19.36806Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.28","title":"Write integration tests for extraction and export end-to-end flows","description":"Integration tests verify the extraction pipeline (search, score, persist) and export pipeline (retrieve, format) using live Docker services and pre-ingested test data.\n\n## Inputs\n- **ingested_data** (`string`): Test documents must be ingested first -- Source: Integration test setup\n\n## Outputs\n- **test_files** (`list\u003cfilepath\u003e`): compilable Go test files with integration build tag -- Dest: tests/integration/\n\n## Constraints\n- Requires all Docker services plus Claude CLI\n- Must use //go:build integration tag\n- Test data setup should reuse ingested test documents from ingest tests\n","acceptance_criteria":"- TestExtractWithMatches extracts quotes from ingested data and verifies non-empty results with valid chunk references\n- TestExtractNoMatches extracts with irrelevant topic and verifies empty result with informative message\n- TestExportMarkdown exports an extraction to Markdown and verifies it contains blockquotes and bibliography\n- TestExportJSON exports an extraction to JSON and verifies it is valid parseable JSON with expected structure\n- Tests are tagged with //go:build integration","notes":"Covers tasks T096-T097 and T108-T109 from tasks.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:40.662135Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:52.693852Z","closed_at":"2026-02-01T01:53:52.693852Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.28","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:40.664619Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.29","title":"Validate all quickstart.md scenarios 1-10 against live system","description":"All 10 quickstart scenarios from quickstart.md execute successfully against a running system, verifying ingestion, extraction, export, metadata fix, and error handling workflows match expected behavior.\n\n## Inputs\n- **quickstart_scenarios** (`filepath`): file exists -- Source: specs/001-quote-extractor-cli/quickstart.md\n\n## Outputs\n- **validation_report** (`string`): all 10 scenarios pass -- Dest: Validation results documented\n\n## Constraints\n- Requires all Docker services running\n- Requires Claude CLI installed and authenticated\n- Must use real documents, not mocks\n","acceptance_criteria":"- Scenario 1 (Basic ingestion): PDF ingestion produces document + chunks in database\n- Scenario 2 (Manual metadata): --title, --author, --year flags override auto-detected metadata\n- Scenario 3 (Duplicate detection): Re-ingesting same file is skipped with message\n- Scenario 4 (Quote extraction): Extract returns quotes with Harvard citations and explanations\n- Scenario 5 (Custom parameters): --max-quotes and --min-relevance flags are respected\n- Scenario 6 (Markdown export): Output contains blockquotes, citations, and bibliography\n- Scenario 7 (JSON export): Output is valid JSON parseable by jq\n- Scenario 8 (BibTeX export): Output is valid BibTeX\n- Scenario 9 (Metadata fix): Interactive prompts update missing metadata\n- Scenario 10 (Error handling): Service unavailable produces clear error with exit code 2\n- SC-003 verified: all output quotes match verbatim source text (zero hallucination)\n- SC-004 verified: Harvard references have correct author format, year, page number, punctuation\n- SC-008 verified: full workflow completable without prior training","notes":"Covers tasks T129-T136 from tasks.md. This is the final acceptance validation.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":480,"created_at":"2026-02-01T01:49:41.36107Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:52.83486Z","closed_at":"2026-02-01T01:53:52.83486Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.29","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:41.364509Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.3","title":"Implement all domain model structs with JSON serialization helpers","description":"Domain model types Document, Chunk, BBox, Extraction, ExtractedQuote, and SourceType enum are defined in internal/models/ with correct JSON marshal/unmarshal support for composite fields.\n\n## Inputs\n- **data_model_spec** (`filepath`): file exists -- Source: specs/001-quote-extractor-cli/data-model.md\n\n## Outputs\n- **model_files** (`list\u003cfilepath\u003e`): compilable Go source files -- Dest: internal/models/\n\n## Constraints\n- Authors field stored as JSON array in SQLite but exposed as []string in Go\n- SectionPath stored as JSON array in SQLite but exposed as []string in Go\n- BBox stored as JSON object in SQLite\n","acceptance_criteria":"- SourceType is a string type with constants: book, journal_article, website, chapter, unknown\n- Document struct has fields matching data-model.md including Authors as []string with JSON array serialization\n- Chunk struct has ID as string (Docling self_ref), Text as string, SectionPath as []string with JSON serialization, BBox as pointer to BBox struct with JSON serialization\n- BBox struct has L, T, R, B as float64 and CoordOrigin as string\n- Extraction struct has ID, Topic, CreatedAt fields\n- ExtractedQuote struct has ID, ExtractionID, ChunkID, RelevanceScore (int 0-100), Explanation fields\n- All structs compile and have correct db struct tags","notes":"Covers tasks T016-T021 from tasks.md. All model files are independent and can be written in parallel.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:22.637579Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.409378Z","closed_at":"2026-02-01T01:53:45.409378Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.3","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:22.640332Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.3","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:42.019103Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.4","title":"Implement SQLite schema migrations for all four tables with indexes","description":"Running Store.RunMigrations() creates the documents, chunks, extractions, and extracted_quotes tables with all constraints, foreign keys, and indexes as specified in data-model.md.\n\n## Inputs\n- **schema_sql** (`string`): none -- Source: specs/001-quote-extractor-cli/data-model.md SQLite Schema section\n\n## Outputs\n- **migrations_file** (`filepath`): compilable Go source -- Dest: internal/store/migrations.go\n\n## Constraints\n- Must use IF NOT EXISTS for idempotent migration\n- Foreign keys must be enabled via PRAGMA\n- source_type CHECK constraint must enforce enum values\n","acceptance_criteria":"- documents table has columns: id INTEGER PRIMARY KEY AUTOINCREMENT, filename TEXT NOT NULL, filepath TEXT NOT NULL, title TEXT, authors TEXT, year INTEGER, publisher TEXT, source_type TEXT NOT NULL DEFAULT 'unknown' with CHECK constraint, checksum TEXT UNIQUE NOT NULL, ingested_at DATETIME DEFAULT CURRENT_TIMESTAMP\n- chunks table has columns: id TEXT PRIMARY KEY, document_id INTEGER NOT NULL FK, text TEXT NOT NULL, page_num INTEGER, section_path TEXT, bbox TEXT, embedding_id TEXT with CASCADE delete\n- extractions table has columns: id INTEGER PRIMARY KEY AUTOINCREMENT, topic TEXT NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n- extracted_quotes table has columns: id INTEGER PRIMARY KEY AUTOINCREMENT, extraction_id INTEGER NOT NULL FK, chunk_id TEXT NOT NULL FK, relevance_score INTEGER NOT NULL CHECK(0-100), explanation TEXT NOT NULL with CASCADE delete on extraction_id\n- Indexes idx_chunks_document, idx_chunks_page, idx_quotes_extraction, idx_quotes_chunk, idx_documents_checksum are created\n- PRAGMA foreign_keys = ON is executed","notes":"Covers tasks T008-T012 from tasks.md. Schema is defined precisely in data-model.md.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T01:49:23.464039Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.414972Z","closed_at":"2026-02-01T01:53:45.414972Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.4","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:23.466414Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.4","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:42.654313Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.5","title":"Implement Docling HTTP client with types, health check, and file conversion","description":"A Docling Client struct sends HTTP requests to docling-serve, supporting health checks and multipart file upload for document conversion, returning parsed DoclingDocument structs.\n\n## Inputs\n- **base_url** (`url`): valid HTTP URL -- Source: Configuration, default http://localhost:5001\n- **file_path** (`filepath`): file must exist and be readable -- Source: User-provided document path\n\n## Outputs\n- **docling_document** (`string`): valid DoclingDocument JSON -- Dest: Return value from ConvertFile()\n\n## Constraints\n- HTTP timeout must be 60 seconds to accommodate large document processing\n- Use standard net/http package, no external HTTP client libraries\n- Response must be fully parsed into Go structs, not raw JSON\n","acceptance_criteria":"- DoclingDocument, Origin, TextItem, Provenance, and BBox types match contracts/docling-api.md\n- NewClient(baseURL) creates a client with 60-second HTTP timeout\n- Client.Health() sends GET /health and returns nil on 200 status\n- Client.Health() returns an error with message when service is unavailable\n- Client.ConvertFile(filepath) sends POST /v1/convert/file with multipart form data\n- ConvertFile returns a DoclingDocument with Texts array populated\n- ConvertFile returns an error for non-200 responses including the status code","notes":"Covers tasks T022-T026 from tasks.md. Types and client implementation are in separate files for clarity.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:24.305959Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.419847Z","closed_at":"2026-02-01T01:53:45.419847Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.5","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:24.308669Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.5","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:43.381876Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.6","title":"Implement Weaviate client with schema management, chunk insertion, and deletion","description":"A WeaviateClient struct manages the Weaviate Chunk collection schema, inserts chunks with auto-generated embeddings, and supports deletion by document ID.\n\n## Inputs\n- **weaviate_url** (`url`): valid HTTP URL -- Source: Configuration, default http://localhost:8080\n\n## Outputs\n- **client_files** (`list\u003cfilepath\u003e`): compilable Go source -- Dest: internal/search/\n\n## Constraints\n- Must use official github.com/weaviate/weaviate-go-client/v4\n- No abstraction layer over the Weaviate client per project constitution\n- Embeddings are auto-generated by Weaviate via text2vec-ollama module\n","acceptance_criteria":"- ChunkResult struct has fields: Text, ChunkID, DocumentID, PageNum, SectionPath, Score\n- GetChunkClass() returns the Weaviate class definition matching contracts/weaviate-schema.json\n- Schema uses text2vec-ollama vectorizer with nomic-embed-text model\n- Only the text property is vectorized; chunk_id, document_id, page_num, section_path are skipped\n- NewWeaviateClient(url) creates a connected client\n- CreateSchema() creates the Chunk class if it does not exist\n- InsertChunk(chunk) inserts a chunk and returns its Weaviate UUID\n- DeleteByDocumentID(id) removes all chunks with matching document_id","notes":"Covers tasks T027-T032 from tasks.md. HybridSearch is implemented separately in the extraction phase.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:25.001907Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.424772Z","closed_at":"2026-02-01T01:53:45.424772Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.6","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:25.004706Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.6","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:44.054098Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.7","title":"Implement Python chunker wrapper and chunk_helper.py script","description":"A Go Chunker struct executes scripts/chunk_helper.py via subprocess, passing DoclingDocument JSON on stdin and parsing chunked output from stdout, with the Python script using HierarchicalChunker at 800 tokens with 200-token overlap.\n\n## Inputs\n- **docling_json** (`string`): valid DoclingDocument JSON -- Source: Output from Docling client ConvertFile()\n\n## Outputs\n- **chunks** (`list\u003cChunk\u003e`): each chunk has id, text, page_num, section headings -- Dest: Return value from ChunkDocument()\n\n## Constraints\n- Python code limited to scripts/ directory per project constitution\n- Go code in internal/chunker/ only wraps the Python subprocess\n- chunk_helper.py must include metadata preservation (page numbers, section headings)\n","acceptance_criteria":"- ChunkOutput type has fields: ID, Text, Page, Headings, Origin\n- NewChunker() verifies that python3 is available and scripts/chunk_helper.py exists\n- NewChunker() returns an error if Python or the script is not found\n- ChunkDocument(docJSON) passes JSON to chunk_helper.py via stdin\n- ChunkDocument parses JSON lines from stdout into ChunkOutput structs\n- chunk_helper.py uses HierarchicalChunker with max_tokens=800 and overlap_tokens=200\n- chunk_helper.py outputs one JSON object per line (JSON lines format)\n- Each output line contains id, text, page, headings, and origin fields","notes":"Covers tasks T033-T036 from tasks.md. The Python script is the only Python code in the project.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:25.754485Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.441476Z","closed_at":"2026-02-01T01:53:45.441476Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.7","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:25.757377Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.7","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:44.708501Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.8","title":"Implement Claude Code CLI wrapper with prompt template and response validation","description":"A Claude Wrapper struct executes the claude CLI binary with structured prompts, parses JSON responses containing chunk IDs and relevance scores, and validates that responses reference only known chunk IDs.\n\n## Inputs\n- **extraction_task** (`string`): topic is non-empty, chunks array is non-empty -- Source: Extract command builds from search results\n\n## Outputs\n- **extraction_response** (`string`): valid JSON with selected_chunks array -- Dest: Return value from ExtractQuotes()\n\n## Constraints\n- Claude CLI -p flag MUST be the last flag on the command line\n- LLM must return chunk IDs only, never quote text (Constitution Principle I)\n- Verbatim text is always retrieved from SQLite, never from LLM response\n- 30-second default timeout for CLI execution\n","acceptance_criteria":"- ExtractionTask, ChunkInput, ExtractionResponse, SelectedChunk types match contracts/claude-prompt.md\n- NewWrapper(cliPath, timeout) creates a wrapper with configurable path and timeout\n- buildPrompt(task) generates a prompt using text/template matching the template in contracts/claude-prompt.md\n- ExtractQuotes() invokes claude with flags: --print --output-format json -p (with -p as the LAST flag)\n- ExtractQuotes() parses JSON response into ExtractionResponse struct\n- ValidateResponse() rejects chunk_ids not matching #/texts/ prefix pattern\n- ValidateResponse() rejects chunk_ids not present in the valid chunk ID set\n- ValidateResponse() rejects relevance scores outside 0-100 range\n- ValidateResponse() rejects empty explanations","notes":"Covers tasks T037-T041 from tasks.md. The prompt template is critical for deterministic quote retrieval.","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:26.442687Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.447891Z","closed_at":"2026-02-01T01:53:45.447891Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.8","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:26.445323Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.8","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:45.338805Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-8ua.9","title":"Implement Harvard US reference formatter with all source types and in-text citations","description":"A Harvard US formatter correctly formats full references and in-text citations for books, journal articles, websites, and book chapters following US Harvard style with double quotes, US date format, and DOI/URL inclusion.\n\n## Inputs\n- **document_metadata** (`string`): at minimum authors and year must be present -- Source: Document records from SQLite\n\n## Outputs\n- **formatted_reference** (`string`): non-empty, follows Harvard US format rules -- Dest: Return value from Format methods\n\n## Constraints\n- US Harvard style: dates as 'January 15, 2024', double quotes for titles\n- Include DOI or URL when available per FR-006a\n- Modular interface design to support future APA/MLA/Chicago styles per FR-006b\n","acceptance_criteria":"- Author struct and FormatAuthors() handles 1 author, 2 authors (with 'and'), and 3+ authors (with 'et al.')\n- FormatAuthorsShort() produces abbreviated form for in-text citations\n- Formatter interface defines FormatFull() and FormatInText() methods\n- NewFormatter() factory returns a HarvardUS implementation\n- FormatBook produces: Author (Year) Title. Place: Publisher. with DOI when available\n- FormatJournalArticle produces: Author (Year) \"Title,\" Journal, Vol(Issue), pp. X-Y. with DOI when available\n- FormatWebsite produces: Author (Year) \"Title,\" Site. Available at: URL (Accessed: Date). with US date format\n- FormatChapter produces: Author (Year) \"Chapter,\" in Editor (ed.) Book. Place: Publisher, pp. X-Y. with DOI when available\n- FormatInText produces (Author, Year, p. X) with correct multi-author handling","notes":"Covers tasks T042-T050 from tasks.md. Reference formatting is pure Go with no external dependencies.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:49:27.129628Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:53:45.454775Z","closed_at":"2026-02-01T01:53:45.454775Z","close_reason":"Test complete - clearing all beads","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-8ua.9","depends_on_id":"task_templating-8ua","type":"parent-child","created_at":"2026-02-01T01:49:27.131924Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-8ua.9","depends_on_id":"task_templating-8ua.1","type":"blocks","created_at":"2026-02-01T01:49:46.01856Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-crg","title":"Update README.md with install-taskify.sh installation instructions","description":"Add a section to README.md documenting how to use scripts/install-taskify.sh: invocation examples, flags (--target, --force, --skip-beads, --dry-run), prerequisites (Go), and what gets installed.","status":"open","priority":3,"issue_type":"task","owner":"riabtchuk@gmail.com","created_at":"2026-02-01T22:45:16.345011Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:45:16.345011Z"}
{"id":"task_templating-e06","title":"BD Integration: taskval x Beads","description":"Integrate taskval validator with Beads (bd) issue tracker. Four deliverables: (1) Fix module path, (2) Add --create-beads and --dry-run flags to taskval CLI, (3) Write TASK_CREATION_INSTRUCTIONS_AGENTS.md for agent workflow guidance, (4) Create /taskify Claude Code skill. See BD_INTEGRATION_PLAN.md for full spec.","status":"closed","priority":1,"issue_type":"epic","owner":"riabtchuk@gmail.com","created_at":"2026-01-31T21:13:08.070557Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:22.810425Z","closed_at":"2026-02-01T01:17:22.810425Z","close_reason":"Closed","labels":["taskval-managed"]}
{"id":"task_templating-e06.1","title":"Fix Go module path from foundry-zero to nixlim","description":"Update the Go module path from github.com/foundry-zero/task-templating to github.com/nixlim/task_templating. This is a 2-line change: (1) go.mod module declaration, (2) import path in cmd/taskval/main.go line 30. All internal packages use relative imports so only the one import in main.go needs updating. Verify with go build.","acceptance_criteria":"go.mod module line reads github.com/nixlim/task_templating\ncmd/taskval/main.go import on line 30 references github.com/nixlim/task_templating/internal/validator\ngo build ./cmd/taskval/ succeeds without errors\ngo test ./... passes","notes":"Part 1 of BD_INTEGRATION_PLAN.md. Prerequisite for all other work.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-01-31T21:13:21.76135Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:01:25.293029Z","closed_at":"2026-02-01T01:01:25.293029Z","close_reason":"Fixed module path in go.mod and cmd/taskval/main.go. Build and tests pass.","labels":["part-1","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.1","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:13:21.766496Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.10","title":"Implement text-mode output for beads creation results","description":"Add text-mode output formatting for beads creation results to display after successful creation in text output mode.\n\n## Format (text mode with --create-beads)\nAfter the existing validation output, add a BEADS CREATION section showing:\n- Epic created: \u003cid\u003e \u003ctitle\u003e (graph mode only)\n- Task created: \u003cid\u003e \u003ctitle\u003e (\u003ctemplate_task_id\u003e) for each task\n- Dependency: \u003cid\u003e blocked-by \u003cdep_id\u003e for each dependency\n- Summary: N epic + M tasks created, D dependencies linked.\n\nSee BD_INTEGRATION_PLAN.md section 2.13 for exact format.\n\n## Files\n- internal/beads/beads.go or a new output.go","acceptance_criteria":"Text output includes BEADS CREATION header\nEpic line shows bd ID and quoted title (graph mode only)\nEach task line shows bd ID, quoted title, and template task_id in parens\nDependency lines show blocked-by relationship\nSummary line shows correct counts\nOutput appears after the VALIDATION PASSED section","notes":"Part 2 of BD_INTEGRATION_PLAN.md. Section 2.13.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:14:38.880273Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:04:25.110462Z","closed_at":"2026-02-01T01:04:25.110462Z","close_reason":"Implemented FormatTextOutput in beads.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.10","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:38.881583Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.10","depends_on_id":"task_templating-e06.6","type":"blocks","created_at":"2026-01-31T21:17:22.496522Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.10","depends_on_id":"task_templating-e06.7","type":"blocks","created_at":"2026-01-31T21:17:22.947179Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.11","title":"Implement JSON-mode output for beads creation results","description":"Add JSON-mode output for beads creation results, extending the existing validation JSON output.\n\n## Format (JSON mode with --create-beads)\nAdd a 'beads' key to the validation JSON output containing:\n- epic_id: string (graph mode only)\n- tasks: map of template_task_id -\u003e bd_issue_id\n- dependencies_linked: int\n- total_created: int\n\nSee BD_INTEGRATION_PLAN.md section 2.14 for exact schema.\n\n## Files\n- internal/beads/beads.go or output.go\n- cmd/taskval/main.go (JSON output integration)","acceptance_criteria":"JSON output includes beads object when --create-beads is used\nbeads.epic_id contains the epic bd ID (graph mode)\nbeads.tasks maps each template task_id to its bd issue ID\nbeads.dependencies_linked shows correct count\nbeads.total_created shows correct total (epic + tasks)\nExisting validation JSON fields (valid, errors, stats) are preserved unchanged","notes":"Part 2 of BD_INTEGRATION_PLAN.md. Section 2.14.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:14:44.026883Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:04:25.95239Z","closed_at":"2026-02-01T01:04:25.95239Z","close_reason":"Implemented FormatJSONOutput and BeadsJSON struct in beads.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.11","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:44.02875Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.11","depends_on_id":"task_templating-e06.6","type":"blocks","created_at":"2026-01-31T21:17:23.373964Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.11","depends_on_id":"task_templating-e06.7","type":"blocks","created_at":"2026-01-31T21:17:23.812621Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.12","title":"Add --create-beads, --dry-run, --epic-title CLI flags to main.go","description":"Update cmd/taskval/main.go to register the three new flags and wire them to the beads creation pipeline.\n\n## New Flags\n- --create-beads (bool): On validation success, create Beads issues via bd CLI\n- --dry-run (bool): Show bd commands that would be executed (requires --create-beads)\n- --epic-title (string): Override the auto-generated epic title (graph mode only)\n\n## Wiring\nAfter validation passes and --create-beads is set:\n1. Run pre-flight checks (bd on PATH, beads initialized)\n2. Create a beads.Creator with the DryRun flag and epic title\n3. Call the appropriate creation method (single task or graph)\n4. Format and print the results (text or JSON depending on --output)\n\n## Validation\n- --dry-run without --create-beads should produce an error\n- --epic-title without --create-beads should produce a warning\n\nSee BD_INTEGRATION_PLAN.md sections 2.1, 2.8, and 2.12.\n\n## Files\n- cmd/taskval/main.go","acceptance_criteria":"Three new flags are registered: --create-beads, --dry-run, --epic-title\n--dry-run without --create-beads prints error and exits 2\nAfter successful validation with --create-beads, beads creation pipeline runs\nPre-flight checks run before any bd commands\nCreator is configured with dry-run and epic-title values\nResults are formatted as text or JSON based on --output flag\nImport path updated to include internal/beads package\nExit code 2 on bd errors, 0 on success, 1 on validation failure","notes":"Part 2, Step 6 of BD_INTEGRATION_PLAN.md. Sections 2.1 and 2.8.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:14:53.286182Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:06:33.943779Z","closed_at":"2026-02-01T01:06:33.943779Z","close_reason":"Added --create-beads, --dry-run, --epic-title flags to main.go. Wired full beads creation pipeline with pre-flight checks, dry-run, text and JSON output.","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.12","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:53.287629Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.12","depends_on_id":"task_templating-e06.8","type":"blocks","created_at":"2026-01-31T21:17:24.507096Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.12","depends_on_id":"task_templating-e06.9","type":"blocks","created_at":"2026-01-31T21:17:24.943717Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.12","depends_on_id":"task_templating-e06.10","type":"blocks","created_at":"2026-01-31T21:17:25.410068Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.12","depends_on_id":"task_templating-e06.11","type":"blocks","created_at":"2026-01-31T21:17:25.870632Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.13","title":"Write unit tests for priority and estimate mapping","description":"Create internal/beads/beads_test.go with unit tests for the MapPriority and MapEstimate functions.\n\n## Test Cases for MapPriority\n- critical -\u003e 0, high -\u003e 1, medium -\u003e 2, low -\u003e 3\n- Empty string -\u003e 2, unknown value -\u003e 2\n- Case sensitivity behavior\n\n## Test Cases for MapEstimate\n- trivial -\u003e 15, small -\u003e 60, medium -\u003e 240, large -\u003e 480\n- unknown -\u003e 0, empty string -\u003e 0\n\n## Files\n- internal/beads/beads_test.go (new)","acceptance_criteria":"All defined priority mappings are tested with assertions\nDefault priority (empty/unknown) returns 2\nAll defined estimate mappings are tested with assertions\nUnknown/empty estimate returns 0\nTests pass with go test ./internal/beads/...","notes":"Part 2, Step 7 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:15:00.966652Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:08:04.904271Z","closed_at":"2026-02-01T01:08:04.904271Z","close_reason":"All mapping tests pass (priority, estimate, case sensitivity, defaults)","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.13","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:00.968171Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.13","depends_on_id":"task_templating-e06.3","type":"blocks","created_at":"2026-01-31T21:17:31.120053Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.14","title":"Write unit tests for description composition","description":"Add unit tests to internal/beads/beads_test.go for the ComposeDescription function.\n\n## Test Cases\n- Task with all sections populated (goal, inputs, outputs, constraints, non-goals, error-cases)\n- Task with only goal (minimal)\n- Task with N/A contextual fields (sections should be omitted)\n- Input/output formatting matches the spec format\n- Error case formatting with trigger, action, fallback\n- Empty arrays produce no section headers\n\n## Files\n- internal/beads/beads_test.go","acceptance_criteria":"Test with all sections verifies correct markdown structure\nTest with only goal produces just the goal line\nTest with N/A fields confirms those sections are omitted\nInput format matches: - **name** (type): constraints -- Source: source\nOutput format matches: - **name** (type): constraints -- Dest: destination\nError case format verified\nTests pass with go test ./internal/beads/...","notes":"Part 2, Step 7 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:15:07.024653Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:08:05.918836Z","closed_at":"2026-02-01T01:08:05.918836Z","close_reason":"Description composition tests pass (all sections, goal-only, N/A omission)","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.14","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:07.026335Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.14","depends_on_id":"task_templating-e06.4","type":"blocks","created_at":"2026-01-31T21:17:31.601761Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.15","title":"Write unit tests for bd command construction","description":"Add unit tests to internal/beads/beads_test.go for command construction (both single task and graph modes).\n\n## Test Cases for Single Task\n- Verify bd create command has correct flags and values\n- Verify bd update --design command is generated\n- Verify acceptance criteria formatting\n\n## Test Cases for Graph Mode\n- Verify epic creation command\n- Verify task commands include --parent \u003cepic-id\u003e\n- Verify topological ordering of tasks\n- Verify dependency commands (bd dep add)\n- Verify epic title resolution order\n\n## Dry-Run Tests\n- Verify commands are collected but not executed\n- Verify placeholder IDs in dry-run output\n- Verify summary line counts\n\n## Files\n- internal/beads/beads_test.go","acceptance_criteria":"Single task command includes all required flags (--title, --type, --description, etc.)\nGraph mode generates epic command first, then tasks with --parent\nTasks follow topological order in graph mode\nDependency commands reference correct bd IDs\nEpic title resolution follows priority order (flag \u003e milestone \u003e filename \u003e stdin)\nDry-run collects commands without executing\nTests pass with go test ./internal/beads/...","notes":"Part 2, Step 7 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:15:12.192489Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:08:06.866055Z","closed_at":"2026-02-01T01:08:06.866055Z","close_reason":"Command construction tests pass (single task, graph mode, epic title, dry-run, text/JSON output)","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.15","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:12.194478Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.15","depends_on_id":"task_templating-e06.6","type":"blocks","created_at":"2026-01-31T21:17:32.087337Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.15","depends_on_id":"task_templating-e06.7","type":"blocks","created_at":"2026-01-31T21:17:32.545192Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.16","title":"Update existing validator tests for ValidationResult Graph field","description":"Update internal/validator/validate_test.go to verify the new Graph field behavior on ValidationResult.\n\n## Changes\n- Add test that Graph field is populated when validation passes in graph mode\n- Add test that Graph field is nil when validation fails\n- Verify existing tests still pass (Graph field with json:\"-\" should not affect JSON comparison tests)\n\n## Files\n- internal/validator/validate_test.go","acceptance_criteria":"Test confirms Graph is non-nil after successful graph validation\nTest confirms Graph is nil after failed validation\nAll existing validator tests still pass\nNo JSON output tests are broken by the new field","notes":"Part 2, Step 8 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-01-31T21:15:16.923895Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:08:46.934088Z","closed_at":"2026-02-01T01:08:46.934088Z","close_reason":"Added 4 tests for Graph field: populated on graph success, populated on single task success, nil on failure, excluded from JSON output. All tests pass.","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.16","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:16.92546Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.16","depends_on_id":"task_templating-e06.2","type":"blocks","created_at":"2026-01-31T21:17:32.983499Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.17","title":"Write TASK_CREATION_INSTRUCTIONS sections 1-5 (overview, prereqs, workflows)","description":"Create TASK_CREATION_INSTRUCTIONS_AGENTS.md with sections 1-5:\n\n## Sections\n1. Overview: What the taskval+bd workflow achieves (quality-gated task tracking), when to use it\n2. Prerequisites: taskval binary, bd initialized, JSON task files conforming to spec\n3. Workflow A: User-Provided Tasks - agent decomposes user request into task graph JSON, validates with taskval, creates beads, picks up work\n4. Workflow B: Existing Task Files - scan for .task.json files, validate, create beads if not tracked\n5. Writing Valid Task JSON - required fields reference, what makes each valid, common validation failures (SCHEMA, V2, V4-V10), single task and graph examples\n\nSee BD_INTEGRATION_PLAN.md section Part 3 for full outline.\n\n## Files\n- TASK_CREATION_INSTRUCTIONS_AGENTS.md (new)","acceptance_criteria":"Document has sections 1-5 with correct headings\nOverview explains quality-gated task tracking workflow\nPrerequisites list taskval, bd, and JSON conformance\nWorkflow A covers full user-to-beads pipeline with commands\nWorkflow B covers scan-validate-create pipeline\nSection 5 includes reference table for all 15 fields\nCommon validation failures listed with fix instructions for each V-code\nIncludes at least one complete single task JSON example\nIncludes at least one complete task graph JSON example","notes":"Part 3, Step 9 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:15:38.433053Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:10:04.618634Z","closed_at":"2026-02-01T01:10:04.618634Z","close_reason":"Wrote sections 1-5 of TASK_CREATION_INSTRUCTIONS_AGENTS.md","labels":["part-3","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.17","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:38.435931Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.18","title":"Write TASK_CREATION_INSTRUCTIONS sections 6-7 (decomposition, pipeline)","description":"Add sections 6-7 to TASK_CREATION_INSTRUCTIONS_AGENTS.md:\n\n## Section 6: Task Decomposition Guidelines\n- One task = one coherent unit (30 min to 4 hours)\n- Goal must be single testable sentence starting with verb\n- Acceptance criteria: independently verifiable\n- Dependencies must form DAG (no cycles, no self-references)\n- Use N/A with reason for non-applicable contextual fields\n- files_scope as narrow as possible\n\n## Section 7: The Validation -\u003e Beads Pipeline\n- Full command reference for all flag combinations\n- --dry-run to preview before creating\n- What happens on success (epic + tasks + deps)\n- What happens on validation failure (fix and retry)\n- What happens on bd failure (partial creation, cleanup)\n\n## Files\n- TASK_CREATION_INSTRUCTIONS_AGENTS.md","acceptance_criteria":"Section 6 covers granularity (30 min to 4 hours per task)\nSection 6 specifies goal format (imperative, verb-first, testable)\nSection 6 explains N/A pattern for contextual fields\nSection 7 includes command examples for all flag combinations\nSection 7 explains dry-run workflow\nSection 7 covers success, validation failure, and bd failure scenarios","notes":"Part 3, Step 9 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:15:46.164618Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:10:05.522618Z","closed_at":"2026-02-01T01:10:05.522618Z","close_reason":"Wrote sections 6-7 (decomposition guidelines, pipeline reference)","labels":["part-3","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.18","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:46.167434Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.18","depends_on_id":"task_templating-e06.17","type":"blocks","created_at":"2026-01-31T21:17:32.304985Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.19","title":"Write TASK_CREATION_INSTRUCTIONS sections 8-9 (post-creation, quick ref)","description":"Add sections 8-9 to TASK_CREATION_INSTRUCTIONS_AGENTS.md:\n\n## Section 8: After Tasks Are Created in Beads\n- bd ready to find unblocked work\n- bd update \u003cid\u003e --status in_progress to claim\n- Do the work respecting files_scope from template metadata\n- bd close \u003cid\u003e --reason 'Completed' to mark done\n- bd sync at end of session\n- If new tasks emerge: create new .task.json, validate, create beads\n\n## Section 9: Quick Reference\n- Cheat sheet of most common commands\n- Field reference table (all 15 fields, type, required/optional)\n- Priority mapping table (critical=0, high=1, medium=2, low=3)\n- Estimate mapping table (trivial=15, small=60, medium=240, large=480)\n\n## Files\n- TASK_CREATION_INSTRUCTIONS_AGENTS.md","acceptance_criteria":"Section 8 covers bd ready -\u003e claim -\u003e work -\u003e close -\u003e sync workflow\nSection 8 explains files_scope adherence during execution\nSection 8 describes how to handle emergent tasks\nSection 9 has a command cheat sheet with all key commands\nSection 9 has the complete 15-field reference table\nSection 9 has priority and estimate mapping tables\nDocument is complete and self-contained after this section","notes":"Part 3, Step 9 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:15:53.669952Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:10:06.47391Z","closed_at":"2026-02-01T01:10:06.47391Z","close_reason":"Wrote sections 8-9 (post-creation workflow, quick reference tables)","labels":["part-3","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.19","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:15:53.672408Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.19","depends_on_id":"task_templating-e06.18","type":"blocks","created_at":"2026-01-31T21:17:32.746157Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.2","title":"Add Graph field to ValidationResult struct","description":"Add a Graph *TaskGraph field to the ValidationResult struct in internal/validator/types.go with json:\"-\" tag to exclude it from JSON output. Update internal/validator/validate.go to populate this field when validation passes (both task and graph modes). This allows the beads layer to access the parsed graph without re-parsing JSON.\n\n## Files\n- internal/validator/types.go\n- internal/validator/validate.go","acceptance_criteria":"ValidationResult has a Graph *TaskGraph field with json:\"-\" tag\nGraph field is populated with the parsed TaskGraph when validation passes in graph mode\nGraph field is nil when validation fails\nJSON output of ValidationResult does not include the Graph field\nExisting tests still pass","notes":"Part 2, Step 2 of BD_INTEGRATION_PLAN.md. Section 2.9.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-01-31T21:13:34.30182Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:02:09.34499Z","closed_at":"2026-02-01T01:02:09.34499Z","close_reason":"Added Graph *TaskGraph field with json:\"-\" tag to ValidationResult. Populated on successful validation in both modes.","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.2","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:13:34.303338Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.2","depends_on_id":"task_templating-e06.1","type":"blocks","created_at":"2026-01-31T21:17:15.465719Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.20","title":"Create SKILL.md with frontmatter and step-by-step instructions","description":"Create .claude/skills/taskify/SKILL.md with YAML frontmatter and the full step-by-step task decomposition instructions.\n\n## Frontmatter\nname: taskify, description, argument-hint, disable-model-invocation: true, context: fork, agent: taskify-agent, allowed-tools list.\n\n## Body Content\n5 steps: (1) Input detection (.task.json vs file vs inline text), (2) Analyse input (identify goals, units of work, deps, file paths), (3) Compose task graph JSON (file naming in .tasks/, required structure, quality rules), (4) Validate with taskval (retry up to 3x on failure), (5) Create beads with --create-beads, (6) Report results summary.\n\nPlus error recovery section (taskval not found, bd not found, bd init, partial failure).\n\nSee BD_INTEGRATION_PLAN.md sections 4.4 and 4.6 for exact content.\n\n## Files\n- .claude/skills/taskify/SKILL.md (new, create directory structure)","acceptance_criteria":"SKILL.md has valid YAML frontmatter with all required fields\ndisable-model-invocation is true\ncontext is fork\nagent is taskify-agent\nallowed-tools restricts to Read, Write, Edit, Bash(taskval *), Bash(bd *), Bash(cat *), Glob, Grep\nBody contains all 5 steps with clear instructions\nInput detection handles .task.json, file path, and inline text\nValidation retry loop documented (up to 3 attempts)\nError recovery section covers all 4 failure modes","notes":"Part 4, Step 10 of BD_INTEGRATION_PLAN.md. Sections 4.4 and 4.6.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:16:11.849156Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:12:03.819008Z","closed_at":"2026-02-01T01:12:03.819008Z","close_reason":"Created SKILL.md with frontmatter (fork context, taskify-agent, allowed-tools) and 5-step instructions","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.20","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:11.851426Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.21","title":"Create spec-reference.md condensed spec reference","description":"Create .claude/skills/taskify/spec-reference.md as a condensed version of STRUCTURED_TEMPLATE_SPEC.md containing only what the taskify agent needs.\n\n## Content (~200 lines)\n- Field definitions table: all 15 fields with types, constraints, required/optional\n- Type vocabulary: primitives, compounds, refined, domain types\n- Validation rules reference: V1-V10 with examples of pass/fail\n- JSON Schema structure: task_node and task_graph top-level shapes\n- The N/A pattern for contextual fields\n\nMust be self-contained with no external references needed.\n\nSee BD_INTEGRATION_PLAN.md section 4.7.\n\n## Files\n- .claude/skills/taskify/spec-reference.md (new)","acceptance_criteria":"Contains complete field definitions table covering all 15 fields\nEach field shows type, constraints, and required/optional status\nType vocabulary section covers primitives, compounds, refined, domain types\nAll validation rules V1-V10 listed with pass and fail examples\nJSON Schema structure documented for both task_node and task_graph\nN/A pattern for contextual fields clearly explained\nDocument is approximately 200 lines\nNo external references required to understand the content","notes":"Part 4, Step 11 of BD_INTEGRATION_PLAN.md. Section 4.7.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:16:18.744202Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:12:04.802119Z","closed_at":"2026-02-01T01:12:04.802119Z","close_reason":"Created spec-reference.md (~160 lines): field definitions, type vocabulary, validation rules V1-V10, JSON schema structure, N/A pattern","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.21","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:18.746491Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.22","title":"Create task-writing-guide.md practical guide","description":"Create .claude/skills/taskify/task-writing-guide.md as a condensed, practical guide for writing valid task JSON.\n\n## Content (~150 lines)\n- Task decomposition principles (granularity, independence, testability)\n- Common patterns for writing good goals, acceptance criteria, inputs/outputs\n- Forbidden words list (try, explore, investigate, look into) and how to rephrase\n- Vague terms list (works correctly, is good, functions properly) and how to make specific\n- Priority mapping table (critical=0, high=1, medium=2, low=3)\n- Estimate mapping table (trivial=15, small=60, medium=240, large=480)\n- Two complete examples: single task and task graph\n\nSee BD_INTEGRATION_PLAN.md section 4.8.\n\n## Files\n- .claude/skills/taskify/task-writing-guide.md (new)","acceptance_criteria":"Decomposition principles cover 30min-4hr granularity\nGoal writing patterns explained with good and bad examples\nForbidden words list complete with rephrasing suggestions\nVague terms list complete with specific alternatives\nPriority mapping table included\nEstimate mapping table included\nComplete single task JSON example included\nComplete task graph JSON example included\nDocument is approximately 150 lines\nPractical and example-heavy tone","notes":"Part 4, Step 12 of BD_INTEGRATION_PLAN.md. Section 4.8.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:16:25.257443Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:12:05.910431Z","closed_at":"2026-02-01T01:12:05.910431Z","close_reason":"Created task-writing-guide.md (~150 lines): decomposition principles, good/bad examples, forbidden words, mapping tables, complete examples","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.22","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:25.260097Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.22","depends_on_id":"task_templating-e06.19","type":"blocks","created_at":"2026-01-31T21:17:36.142808Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.23","title":"Copy example JSON files into skill directory","description":"Copy the validated example files from the project examples/ directory into the skill directory at .claude/skills/taskify/examples/.\n\n## Copies\n- examples/valid_single_task.json -\u003e .claude/skills/taskify/examples/single-task.json\n- examples/valid_task_graph.json -\u003e .claude/skills/taskify/examples/task-graph.json\n\nThese serve as concrete templates the taskify agent can reference when composing new task JSON.\n\nSee BD_INTEGRATION_PLAN.md section 4.9.\n\n## Files\n- .claude/skills/taskify/examples/single-task.json (new)\n- .claude/skills/taskify/examples/task-graph.json (new)","acceptance_criteria":"examples/single-task.json exists and matches content of examples/valid_single_task.json\nexamples/task-graph.json exists and matches content of examples/valid_task_graph.json\nBoth files are valid JSON\nDirectory .claude/skills/taskify/examples/ exists","notes":"Part 4, Step 13 of BD_INTEGRATION_PLAN.md. Section 4.9.","status":"closed","priority":3,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":5,"created_at":"2026-01-31T21:16:30.018147Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:12:06.896105Z","closed_at":"2026-02-01T01:12:06.896105Z","close_reason":"Copied valid_single_task.json and valid_task_graph.json into .claude/skills/taskify/examples/","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.23","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:30.020444Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.24","title":"Create taskify-agent.md custom subagent definition","description":"Create .claude/agents/taskify-agent.md with YAML frontmatter defining the custom subagent for the /taskify skill.\n\n## Frontmatter\nname: taskify-agent, description, tools: Read/Write/Edit/Bash/Glob/Grep, model: opus, permissionMode: acceptEdits, skills: [taskify].\n\n## Rationale\n- model: opus for highest quality task decomposition\n- permissionMode: acceptEdits so agent can write .task.json and run taskval/bd without per-file prompts\n- skills: [taskify] preloads the skill content at startup\n\nSee BD_INTEGRATION_PLAN.md section 4.5.\n\n## Files\n- .claude/agents/taskify-agent.md (new, create directory)","acceptance_criteria":"File exists at .claude/agents/taskify-agent.md\nYAML frontmatter has name: taskify-agent\nmodel is set to opus\npermissionMode is set to acceptEdits\ntools list includes Read, Write, Edit, Bash, Glob, Grep\nskills includes taskify\nDescription explains the agent's purpose","notes":"Part 4, Step 14 of BD_INTEGRATION_PLAN.md. Section 4.5.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":10,"created_at":"2026-01-31T21:16:38.571859Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:12:07.940675Z","closed_at":"2026-02-01T01:12:07.940675Z","close_reason":"Created taskify-agent.md with opus model, acceptEdits permissions, taskify skill preloaded","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.24","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:38.574226Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.25","title":"Update README.md and CLI_COMMAND_REFERENCE.md for new features","description":"Update existing documentation to cover the new --create-beads, --dry-run, and --epic-title flags, the beads integration workflow, and the /taskify skill.\n\n## README.md Updates\n- Add section on Beads integration under Features\n- Update CLI usage examples to show new flags\n- Mention /taskify skill\n- Update architecture diagram if present\n\n## CLI_COMMAND_REFERENCE.md Updates\n- Add --create-beads flag documentation with examples\n- Add --dry-run flag documentation with examples\n- Add --epic-title flag documentation\n- Document new exit code 2 (bd errors)\n- Add output examples for text/JSON/dry-run modes with --create-beads\n\n## Files\n- README.md\n- CLI_COMMAND_REFERENCE.md","acceptance_criteria":"README mentions --create-beads flag and Beads integration\nREADME mentions /taskify skill\nCLI_COMMAND_REFERENCE has --create-beads with usage example\nCLI_COMMAND_REFERENCE has --dry-run with usage example\nCLI_COMMAND_REFERENCE has --epic-title with usage example\nExit code 2 documented for bd errors\nOutput examples shown for text, JSON, and dry-run modes","notes":"Part 4, Step 16 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:16:44.908914Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:15:08.12352Z","closed_at":"2026-02-01T01:15:08.12352Z","close_reason":"Closed","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.25","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:44.912003Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.25","depends_on_id":"task_templating-e06.12","type":"blocks","created_at":"2026-01-31T21:17:33.755521Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.26","title":"Manual integration testing of full /taskify flow","description":"Perform end-to-end manual integration testing of the complete /taskify flow.\n\n## Test Scenarios\n1. Build taskval: go build -o taskval ./cmd/taskval/\n2. Test single task validation + beads creation: taskval --mode=task --create-beads examples/valid_single_task.json\n3. Test graph validation + beads creation: taskval --mode=graph --create-beads examples/valid_task_graph.json\n4. Test dry-run mode: taskval --mode=graph --create-beads --dry-run examples/valid_task_graph.json\n5. Test --epic-title override: taskval --mode=graph --create-beads --epic-title 'Custom Epic' examples/valid_task_graph.json\n6. Test failure modes: invalid JSON, bd not on PATH, bd not initialized\n7. Test /taskify skill invocation with a spec file\n8. Test /taskify skill with inline text description\n9. Verify created beads with bd list and bd show\n10. Verify dependencies with bd dep list\n\n## Files\n- No new files; uses existing examples and built binary","acceptance_criteria":"taskval builds successfully\nSingle task mode creates one bead issue with correct fields\nGraph mode creates epic + tasks + dependencies\nDry-run prints commands without executing\nEpic title override works\nInvalid JSON fails with exit 1 and clear errors\nMissing bd fails with exit 2 and clear message\n/taskify skill successfully decomposes a spec into task JSON\nCreated beads have correct title, description, priority, estimate\nDependencies between beads match the depends_on graph","notes":"Part 4, Step 15 of BD_INTEGRATION_PLAN.md.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-01-31T21:16:54.2887Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:22.356479Z","closed_at":"2026-02-01T01:17:22.356479Z","close_reason":"Closed","labels":["part-4","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:16:54.291268Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.12","type":"blocks","created_at":"2026-01-31T21:17:34.210556Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.20","type":"blocks","created_at":"2026-01-31T21:17:35.254425Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.21","type":"blocks","created_at":"2026-01-31T21:17:35.69798Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.22","type":"blocks","created_at":"2026-01-31T21:17:36.157129Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.23","type":"blocks","created_at":"2026-01-31T21:17:36.596473Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.24","type":"blocks","created_at":"2026-01-31T21:17:37.034485Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.13","type":"blocks","created_at":"2026-01-31T21:17:37.633561Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.14","type":"blocks","created_at":"2026-01-31T21:17:38.080906Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.15","type":"blocks","created_at":"2026-01-31T21:17:38.513171Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.26","depends_on_id":"task_templating-e06.16","type":"blocks","created_at":"2026-01-31T21:17:38.938111Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.3","title":"Implement priority and estimate mapping functions","description":"Create internal/beads/mapping.go with functions to map task template fields to bd CLI values.\n\n## Priority Mapping\nMap template priority strings to bd numeric priorities: critical-\u003e0, high-\u003e1, medium-\u003e2, low-\u003e3, default-\u003e2.\n\n## Estimate Mapping\nMap template estimate strings to minutes: trivial-\u003e15, small-\u003e60, medium-\u003e240, large-\u003e480, unknown-\u003eomit (return 0 to signal omission).\n\n## Files\n- internal/beads/mapping.go (new)","acceptance_criteria":"MapPriority(string) returns correct bd priority int for all defined values (critical=0, high=1, medium=2, low=3)\nMapPriority returns 2 for empty string or unrecognized values\nMapEstimate(string) returns correct minutes for all defined values (trivial=15, small=60, medium=240, large=480)\nMapEstimate returns 0 for unknown or empty string\nFunctions are exported and documented","notes":"Part 2, Step 3 of BD_INTEGRATION_PLAN.md. Section 2.3.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:13:40.282234Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:03:05.037902Z","closed_at":"2026-02-01T01:03:05.037902Z","close_reason":"Implemented MapPriority and MapEstimate in internal/beads/mapping.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.3","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:13:40.284655Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.3","depends_on_id":"task_templating-e06.1","type":"blocks","created_at":"2026-01-31T21:17:15.906628Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.4","title":"Implement description composition from task fields","description":"Add description composition function to internal/beads/mapping.go that builds a structured markdown description from task template fields for the bd --description flag.\n\n## Composition Format\nCombine: goal text, then sections for Inputs (formatted as '- **name** (type): constraints -- Source: source'), Outputs (same format with Dest:), Constraints (bullet list), Non-Goals (bullet list), Error Cases (formatted as '- **trigger**: action -\u003e fallback').\n\nOmit sections that are empty or N/A. See BD_INTEGRATION_PLAN.md section 2.4 for exact format.\n\n## Files\n- internal/beads/mapping.go","acceptance_criteria":"ComposeDescription produces markdown starting with goal text\nInputs section formats each input as '- **name** (type): constraints -- Source: source'\nOutputs section formats each output as '- **name** (type): constraints -- Dest: destination'\nConstraints renders as bullet list under ## Constraints heading\nNon-Goals renders as bullet list under ## Non-Goals heading\nError Cases renders with trigger, action, and fallback under ## Error Cases heading\nSections with no data or N/A status are omitted entirely\nEmpty goal still produces valid output (just the goal line)","notes":"Part 2, Step 3 of BD_INTEGRATION_PLAN.md. Section 2.4.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:13:47.865758Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:03:06.774245Z","closed_at":"2026-02-01T01:03:06.774245Z","close_reason":"Implemented ComposeDescription in internal/beads/mapping.go with all sections","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.4","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:13:47.867368Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.4","depends_on_id":"task_templating-e06.1","type":"blocks","created_at":"2026-01-31T21:17:16.371648Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.5","title":"Implement template metadata JSON builder for design field","description":"Add function to internal/beads/mapping.go that builds the _template metadata JSON structure for the bd --design flag. This stores machine-readable template data (version, task_id, files_scope, effects, inputs, outputs) on each created bead issue.\n\n## Structure\n{\"_template\": {\"version\": \"0.2.0\", \"task_id\": \"...\", \"files_scope\": [...], \"effects\": \"...\", \"inputs\": [...], \"outputs\": [...]}}\n\nSee BD_INTEGRATION_PLAN.md section 2.5 for exact schema.\n\n## Files\n- internal/beads/mapping.go","acceptance_criteria":"BuildTemplateMetadata returns valid JSON string with _template wrapper\nJSON includes version field set to 0.2.0\nJSON includes task_id from the task node\nJSON includes files_scope array (or empty array if N/A)\nJSON includes effects string (or empty if N/A)\nJSON includes inputs array with name, type, constraints, source\nJSON includes outputs array with name, type, constraints, destination\nOutput is valid parseable JSON","notes":"Part 2, Step 3 of BD_INTEGRATION_PLAN.md. Section 2.5.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:13:54.032315Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:03:07.616887Z","closed_at":"2026-02-01T01:03:07.616887Z","close_reason":"Implemented BuildTemplateMetadata in internal/beads/mapping.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.5","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:13:54.034263Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.5","depends_on_id":"task_templating-e06.1","type":"blocks","created_at":"2026-01-31T21:17:16.823797Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.6","title":"Implement bd command construction for single task mode","description":"Create internal/beads/beads.go with the Creator struct and method to build bd CLI commands for single task mode (--mode=task --create-beads).\n\n## Single Task Flow\nStep 1: Build bd create command with --title, --type task, --description (composed), --acceptance (joined with newline-bullet), --priority (mapped), --estimate (mapped, omit if 0), --notes, --labels taskval-managed, --json, --silent.\nStep 2: Build bd update command with --design (template metadata JSON).\n\n## Types\nDefine Creator struct with config (dry-run flag, etc.) and CreationResult struct with TaskIDs map, Commands slice, Created count, Deps count.\n\nSee BD_INTEGRATION_PLAN.md sections 2.2 (single task mode) and 2.10 (ID mapping).\n\n## Files\n- internal/beads/beads.go (new)","acceptance_criteria":"Creator struct is defined with DryRun bool field\nCreationResult struct has EpicID, TaskIDs map, Commands slice, Created int, Deps int\nBuildSingleTaskCommands returns correct bd create command with all mapped fields\nAcceptance criteria array is joined with newline-dash formatting\nPriority and estimate use the mapping functions\nCommand includes --labels taskval-managed --json --silent flags\nA bd update --design command is generated with template metadata JSON","notes":"Part 2, Step 5 of BD_INTEGRATION_PLAN.md. Sections 2.2 (single task) and 2.10.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-01-31T21:14:05.348428Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:04:21.210581Z","closed_at":"2026-02-01T01:04:21.210581Z","close_reason":"Implemented Creator struct, BuildSingleTaskCommands, buildTaskCreateArgs, CreationResult in internal/beads/beads.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.6","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:05.349866Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.6","depends_on_id":"task_templating-e06.2","type":"blocks","created_at":"2026-01-31T21:17:17.330225Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.6","depends_on_id":"task_templating-e06.3","type":"blocks","created_at":"2026-01-31T21:17:17.851021Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.6","depends_on_id":"task_templating-e06.4","type":"blocks","created_at":"2026-01-31T21:17:18.341806Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.6","depends_on_id":"task_templating-e06.5","type":"blocks","created_at":"2026-01-31T21:17:18.937739Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.7","title":"Implement bd command construction for graph mode with epic","description":"Extend internal/beads/beads.go with method to build bd CLI commands for graph mode (--mode=graph --create-beads).\n\n## Graph Mode Flow\nStep 1: Build bd create for the epic (--type epic, --title from epic title resolution, --priority mapped, --labels taskval-managed).\nStep 2: For each task in topological order, build bd create with --parent \u003cepic_id\u003e, all task fields mapped.\nStep 3: For each depends_on reference, build bd dep add \u003ctask_bd_id\u003e \u003cdependency_bd_id\u003e --type blocks.\nStep 4: For each task, build bd update --design with template metadata.\n\n## Epic Title Resolution\n1. Use --epic-title flag if provided\n2. If graph has milestones, use first milestone name\n3. Derive from input filename\n4. Fallback: (stdin)\n\nSee BD_INTEGRATION_PLAN.md section 2.2 (graph mode) and 2.6 (epic title).\n\n## Files\n- internal/beads/beads.go","acceptance_criteria":"BuildGraphCommands generates epic creation command with --type epic\nEpic title follows resolution order: flag \u003e milestone \u003e filename \u003e stdin\nTask commands include --parent \u003cepic_id\u003e referencing the created epic\nTasks are ordered topologically (dependencies before dependents)\nDependency linking commands use bd dep add with --type blocks\nTemplate metadata update commands are generated for each task\nAll commands include --json --silent flags","notes":"Part 2, Step 5 of BD_INTEGRATION_PLAN.md. Sections 2.2 (graph mode) and 2.6.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-01-31T21:14:13.552694Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:04:23.0677Z","closed_at":"2026-02-01T01:04:23.0677Z","close_reason":"Implemented BuildGraphCommands with epic creation, topological ordering, dependency linking, and metadata in beads.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.7","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:13.55517Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.7","depends_on_id":"task_templating-e06.2","type":"blocks","created_at":"2026-01-31T21:17:18.711459Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.7","depends_on_id":"task_templating-e06.3","type":"blocks","created_at":"2026-01-31T21:17:19.242952Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.7","depends_on_id":"task_templating-e06.4","type":"blocks","created_at":"2026-01-31T21:17:19.709007Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.7","depends_on_id":"task_templating-e06.5","type":"blocks","created_at":"2026-01-31T21:17:20.231101Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.8","title":"Implement bd command executor with pre-flight checks","description":"Create internal/beads/exec.go with functions to execute bd commands and handle results.\n\n## Pre-flight Checks\n- Verify bd is on PATH using exec.LookPath\n- Verify beads is initialized by running bd list --limit 0 and checking for 'no beads database' error\n- Fail fast with clear error message if either check fails\n\n## Command Execution\n- Execute each bd command via os/exec\n- Parse JSON output from bd create --json --silent to extract issue IDs\n- Build the TaskIDs map (template task_id -\u003e bd-xxxx) for dependency linking\n- Handle errors: print successful creates, report failed command with stderr, exit 2\n\n## Error Handling\n- If any bd command fails mid-creation: report partial results (what was created, what failed)\n- Exit code 2 for internal/bd errors (not validation failure)\n- No rollback attempted\n\nSee BD_INTEGRATION_PLAN.md sections 2.11 (error handling) and 2.12 (exit codes).\n\n## Files\n- internal/beads/exec.go (new)","acceptance_criteria":"PreFlightCheck verifies bd is on PATH and returns clear error if not found\nPreFlightCheck verifies beads DB is initialized and returns clear error if not\nExecuteCommands runs each bd command sequentially via os/exec\nbd create --silent output is parsed to extract issue IDs (bd-xxxx format)\nTaskIDs map is populated correctly mapping template task_id to bd issue ID\nOn partial failure: successfully created issues are reported before error\nExit code 2 is returned for bd execution failures\nNo rollback is attempted on failure","notes":"Part 2, Step 4 of BD_INTEGRATION_PLAN.md. Sections 2.11 and 2.12.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":45,"created_at":"2026-01-31T21:14:23.381546Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:05:11.731402Z","closed_at":"2026-02-01T01:05:11.731402Z","close_reason":"Implemented PreFlightCheck, ExecuteCommands, runBdCommand, replaceIDs in internal/beads/exec.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.8","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:23.382859Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.8","depends_on_id":"task_templating-e06.6","type":"blocks","created_at":"2026-01-31T21:17:20.767634Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.8","depends_on_id":"task_templating-e06.7","type":"blocks","created_at":"2026-01-31T21:17:21.242365Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-e06.9","title":"Implement dry-run output formatter","description":"Add dry-run mode to internal/beads/beads.go that prints each bd command prefixed with [DRY-RUN] instead of executing them.\n\n## Behavior\nWhen Creator.DryRun is true:\n- Build all commands normally (same as real mode)\n- Instead of executing, print each command to stdout prefixed with [DRY-RUN]\n- Use placeholder IDs (\u003cepic-id\u003e, \u003ctask-name-id\u003e) for references that would come from bd create output\n- Print summary line: 'Would create N epic + M tasks, link D dependencies.'\n- Exit 0 if validation passed\n\nSee BD_INTEGRATION_PLAN.md section 2.15 for exact output format.\n\n## Files\n- internal/beads/beads.go","acceptance_criteria":"DryRun mode prints each command prefixed with [DRY-RUN]\nCommands are printed to stdout, not stderr\nPlaceholder IDs (\u003cepic-id\u003e, \u003ctask-id\u003e) replace runtime-generated IDs\nSummary line shows correct counts of epics, tasks, and dependencies\nNo bd commands are actually executed in dry-run mode\nExit code is 0 when validation passed","notes":"Part 2, Step 5 of BD_INTEGRATION_PLAN.md. Section 2.15.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":30,"created_at":"2026-01-31T21:14:29.82972Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:04:24.266123Z","closed_at":"2026-02-01T01:04:24.266123Z","close_reason":"Implemented FormatDryRunOutput in beads.go","labels":["part-2","taskval-managed"],"dependencies":[{"issue_id":"task_templating-e06.9","depends_on_id":"task_templating-e06","type":"parent-child","created_at":"2026-01-31T21:14:29.831319Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.9","depends_on_id":"task_templating-e06.6","type":"blocks","created_at":"2026-01-31T21:17:21.714966Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-e06.9","depends_on_id":"task_templating-e06.7","type":"blocks","created_at":"2026-01-31T21:17:22.1762Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-jus","title":"Integration Test Epic","status":"closed","priority":0,"issue_type":"epic","owner":"riabtchuk@gmail.com","created_at":"2026-02-01T01:16:59.027222Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:09.733471Z","closed_at":"2026-02-01T01:17:09.733471Z","close_reason":"Closed","labels":["taskval-managed"]}
{"id":"task_templating-jus.1","title":"Implement discount calculation for order totals","description":"Given a price and a discount (fixed amount or percentage), return the discounted total, guaranteed non-negative.\n\n## Inputs\n- **price** (`f64`): price \u003e 0 -- Source: Order record from database\n\n## Outputs\n- **total** (`f64`): total \u003e= 0 -- Dest: Return value\n\n## Constraints\n- Pure function: no side effects, no I/O\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"calculate-discounted-total\",\"files_scope\":[\"internal/pricing/discount.go\",\"internal/pricing/discount_test.go\"],\"effects\":\"\",\"inputs\":[{\"name\":\"price\",\"type\":\"f64\",\"constraints\":\"price \\u003e 0\",\"source\":\"Order record from database\"}],\"outputs\":[{\"name\":\"total\",\"type\":\"f64\",\"constraints\":\"total \\u003e= 0\",\"destination\":\"Return value\"}]}}","acceptance_criteria":"- CalculateTotal(100.0, Fixed(10.0)) == 90.0\n- Unit tests pass with 100% branch coverage","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T01:16:59.676759Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:08.397894Z","closed_at":"2026-02-01T01:17:08.397894Z","close_reason":"Closed","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-jus.1","depends_on_id":"task_templating-jus","type":"parent-child","created_at":"2026-02-01T01:16:59.678148Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-jus.2","title":"Add --format flag to the export command supporting Markdown and JSON","description":"The export CLI command accepts a --format flag (values: markdown, json) and writes extraction results to stdout in the chosen format.\n\n## Inputs\n- **extraction_id** (`int`): extraction_id \u003e 0 -- Source: Positional CLI argument\n- **format** (`string`): format IN [\"markdown\", \"json\"] -- Source: CLI flag --format, default markdown\n\n## Outputs\n- **formatted_output** (`string`): len \u003e 0 -- Dest: stdout\n\n## Constraints\n- Use cobra for flag registration (consistent with existing CLI)\n- Output goes to stdout; errors go to stderr\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"cli-export-format-flag\",\"files_scope\":[\"internal/cli/export.go\",\"internal/cli/export_test.go\"],\"effects\":\"\",\"inputs\":[{\"name\":\"extraction_id\",\"type\":\"int\",\"constraints\":\"extraction_id \\u003e 0\",\"source\":\"Positional CLI argument\"},{\"name\":\"format\",\"type\":\"string\",\"constraints\":\"format IN [\\\"markdown\\\", \\\"json\\\"]\",\"source\":\"CLI flag --format, default markdown\"}],\"outputs\":[{\"name\":\"formatted_output\",\"type\":\"string\",\"constraints\":\"len \\u003e 0\",\"destination\":\"stdout\"}]}}","acceptance_criteria":"- aqe export 1 --format markdown writes valid Markdown to stdout and exits 0\n- aqe export 1 --format json writes valid JSON parseable by jq to stdout and exits 0\n- Default (no --format flag) produces Markdown","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:17:00.376322Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:08.850296Z","closed_at":"2026-02-01T01:17:08.850296Z","close_reason":"Closed","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-jus.2","depends_on_id":"task_templating-jus","type":"parent-child","created_at":"2026-02-01T01:17:00.393981Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-jus.3","title":"Implement hybrid BM25 + vector search via Weaviate","description":"A Search() function queries Weaviate using hybrid search (BM25 + vector similarity) and returns ranked chunk results with scores.\n\n## Inputs\n- **query** (`string`): len \u003e 0, len \u003c= 2000 -- Source: User search query from CLI\n- **limit** (`int`): 1 \u003c= limit \u003c= 100 -- Source: CLI flag, default 10\n\n## Outputs\n- **results** (`list\u003cChunkResult\u003e`): len \u003c= limit; EACH item: item.score \u003e= 0.0 -- Dest: Return value\n\n## Constraints\n- Use official weaviate-go-client/v4 directly (no wrapper abstraction)\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"weaviate-hybrid-search\",\"files_scope\":[\"internal/search/weaviate.go\",\"internal/search/weaviate_test.go\"],\"effects\":\"Network.Out: Weaviate HTTP API at localhost:8080\",\"inputs\":[{\"name\":\"query\",\"type\":\"string\",\"constraints\":\"len \\u003e 0, len \\u003c= 2000\",\"source\":\"User search query from CLI\"},{\"name\":\"limit\",\"type\":\"int\",\"constraints\":\"1 \\u003c= limit \\u003c= 100\",\"source\":\"CLI flag, default 10\"}],\"outputs\":[{\"name\":\"results\",\"type\":\"list\\u003cChunkResult\\u003e\",\"constraints\":\"len \\u003c= limit; EACH item: item.score \\u003e= 0.0\",\"destination\":\"Return value\"}]}}","acceptance_criteria":"- Querying 'machine learning' against a seeded Weaviate instance returns non-empty results\n- Results are sorted by descending score\n- Limit of 5 returns at most 5 results","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":240,"created_at":"2026-02-01T01:17:01.074211Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:09.289863Z","closed_at":"2026-02-01T01:17:09.289863Z","close_reason":"Closed","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-jus.3","depends_on_id":"task_templating-jus","type":"parent-child","created_at":"2026-02-01T01:17:01.077568Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-jus.3","depends_on_id":"task_templating-jus.1","type":"blocks","created_at":"2026-02-01T01:17:01.567247Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-jus.3","depends_on_id":"task_templating-jus.2","type":"blocks","created_at":"2026-02-01T01:17:02.03886Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-njt","title":"Implement discount calculation for order totals","description":"Given a price and a discount (fixed amount or percentage), return the discounted total, guaranteed non-negative.\n\n## Inputs\n- **price** (`f64`): price \u003e 0 -- Source: Order record from database\n- **discount** (`union(Fixed: f64, Percentage: f64(0..1))`): Fixed: value \u003e= 0; Percentage: 0 \u003c= value \u003c= 1 -- Source: Promotion rules engine\n\n## Outputs\n- **total** (`f64`): total \u003e= 0 -- Dest: Return value, stored to order.total_amount\n\n## Constraints\n- Pure function: no side effects, no I/O\n- Result must be clamped to 0.0 minimum (never return negative)\n- Use decimal-safe arithmetic if available in the language; document precision limits otherwise\n\n## Non-Goals\n- Do not implement tax calculation\n- Do not handle currency conversion\n- Do not persist the result (caller's responsibility)\n\n## Error Cases\n- **price is zero or negative**: Return error -\u003e invalid price: must be positive\n- **Fixed discount exceeds price**: Clamp to 0.0 (not an error) -\u003e N/A (silent clamp)\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"calculate-discounted-total\",\"files_scope\":[\"internal/pricing/discount.go\",\"internal/pricing/discount_test.go\"],\"effects\":\"None\",\"inputs\":[{\"name\":\"price\",\"type\":\"f64\",\"constraints\":\"price \\u003e 0\",\"source\":\"Order record from database\"},{\"name\":\"discount\",\"type\":\"union(Fixed: f64, Percentage: f64(0..1))\",\"constraints\":\"Fixed: value \\u003e= 0; Percentage: 0 \\u003c= value \\u003c= 1\",\"source\":\"Promotion rules engine\"}],\"outputs\":[{\"name\":\"total\",\"type\":\"f64\",\"constraints\":\"total \\u003e= 0\",\"destination\":\"Return value, stored to order.total_amount\"}]}}","acceptance_criteria":"- CalculateTotal(100.0, Fixed(10.0)) == 90.0\n- CalculateTotal(100.0, Percentage(0.1)) == 90.0\n- CalculateTotal(50.0, Fixed(60.0)) == 0.0 (clamped, not negative)\n- CalculateTotal(0.01, Percentage(0.99)) \u003e 0 (no floating point underflow to negative)\n- Unit tests pass with 100% branch coverage for this function","notes":"This function is on the critical path for the order pipeline. Keep it simple and fast.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T01:16:54.425345Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:07.947753Z","closed_at":"2026-02-01T01:17:07.947753Z","close_reason":"Closed","labels":["taskval-managed"]}
{"id":"task_templating-owk","title":"Task Graph: .tasks/install-taskify-launcher.task.json","status":"closed","priority":0,"issue_type":"epic","owner":"riabtchuk@gmail.com","created_at":"2026-02-01T22:40:28.576972Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:59:26.815064Z","closed_at":"2026-02-01T22:59:26.815064Z","close_reason":"All 7 tasks completed: script skeleton, prerequisite checks, heredoc file creation, AGENTS/CLAUDE.md update, summary output, /init skill, and smoke test all pass","labels":["taskval-managed"]}
{"id":"task_templating-owk.1","title":"Create install-taskify.sh with header, flag parsing, and utility functions","description":"scripts/install-taskify.sh exists with shebang, set -euo pipefail, version string, usage function, getopts-style flag parsing for --target/--force/--skip-beads/--dry-run/--help, and utility functions (log, warn, die, run, need_cmd, file_has_marker).\n\n## Inputs\n- **plan** (`string`): Sections 1-3 of LAUNCHER_PLAN.md script structure -- Source: LAUNCHER_PLAN.md\n\n## Outputs\n- **script** (`bash script`): Executable, passes shellcheck without errors -- Dest: scripts/install-taskify.sh\n\n## Constraints\n- Must use #!/usr/bin/env bash, not #!/bin/bash\n- set -euo pipefail required\n- No bashisms that break POSIX beyond bash itself\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"create-script-skeleton\",\"files_scope\":[\"scripts/install-taskify.sh\"],\"effects\":\"\",\"inputs\":[{\"name\":\"plan\",\"type\":\"string\",\"constraints\":\"Sections 1-3 of LAUNCHER_PLAN.md script structure\",\"source\":\"LAUNCHER_PLAN.md\"}],\"outputs\":[{\"name\":\"script\",\"type\":\"bash script\",\"constraints\":\"Executable, passes shellcheck without errors\",\"destination\":\"scripts/install-taskify.sh\"}]}}","acceptance_criteria":"- scripts/install-taskify.sh exists and is executable (chmod +x)\n- First line is #!/usr/bin/env bash\n- set -euo pipefail is present within the first 5 lines\n- bash install-taskify.sh --help prints usage text and exits 0\n- bash install-taskify.sh --target /nonexistent exits non-zero with an error message\n- The script defines functions: log, warn, die, run, need_cmd, file_has_marker\n- Flag variables TARGET_DIR, FORCE, SKIP_BEADS, DRY_RUN are initialized with defaults","status":"closed","priority":0,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T22:40:29.240346Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:46:03.877179Z","closed_at":"2026-02-01T22:46:03.877179Z","close_reason":"All 7 acceptance criteria verified: script exists, executable, shebang, set -euo pipefail, --help/--target flags work, all 6 functions defined, all 4 flag variables initialized","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.1","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:29.242277Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-owk.2","title":"Add prerequisite check logic for Go, taskval, bd, and bd init","description":"The script verifies Go is on PATH, installs taskval and bd via go install if missing, warns if not a git repo, and runs bd init if .beads/ is absent (respecting --skip-beads and --dry-run flags).\n\n## Inputs\n- **script-skeleton** (`bash script`): Has flag variables and utility functions -- Source: scripts/install-taskify.sh from create-script-skeleton\n\n## Outputs\n- **updated-script** (`bash script`): Section 4 (prerequisite checks) appended -- Dest: scripts/install-taskify.sh\n\n## Constraints\n- Use need_cmd utility function from skeleton\n- Respect --dry-run by using the run() wrapper\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"add-prerequisite-checks\",\"files_scope\":[\"scripts/install-taskify.sh\"],\"effects\":\"\",\"inputs\":[{\"name\":\"script-skeleton\",\"type\":\"bash script\",\"constraints\":\"Has flag variables and utility functions\",\"source\":\"scripts/install-taskify.sh from create-script-skeleton\"}],\"outputs\":[{\"name\":\"updated-script\",\"type\":\"bash script\",\"constraints\":\"Section 4 (prerequisite checks) appended\",\"destination\":\"scripts/install-taskify.sh\"}]}}","acceptance_criteria":"- Running the script without Go on PATH exits with die message containing 'Go is required'\n- Running the script when taskval is missing triggers 'go install github.com/nixlim/task_templating/cmd/taskval@latest'\n- Running the script when bd is missing triggers 'go install github.com/steveyegge/beads/cmd/bd@latest' unless --skip-beads\n- Running with --skip-beads skips bd install and bd init entirely\n- Running with --dry-run prints the go install commands without executing them\n- If target directory is not a git repo, a warning is printed but script continues\n- If .beads/ does not exist and --skip-beads is not set, bd init is run","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T22:40:29.889973Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:47:04.707228Z","closed_at":"2026-02-01T22:47:04.707228Z","close_reason":"All 7 acceptance criteria verified: Go check exits with error, taskval/bd go install triggered when missing, --skip-beads skips bd, --dry-run prints without executing, git repo warning shown, bd init runs when .beads/ absent","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.2","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:29.892385Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-owk.2","depends_on_id":"task_templating-owk.1","type":"blocks","created_at":"2026-02-01T22:40:33.794653Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-owk.3","title":"Embed all six skill files as heredocs in the install script","description":"The script creates .claude/agents/taskify-agent.md, .claude/skills/taskify/SKILL.md (with patched error recovery), spec-reference.md, task-writing-guide.md, examples/single-task.json, and examples/task-graph.json in the target project via heredocs, skipping existing files unless --force is set.\n\n## Inputs\n- **agent-def** (`markdown file`): Exact content of .claude/agents/taskify-agent.md -- Source: .claude/agents/taskify-agent.md\n- **skill-md** (`markdown file`): SKILL.md with patched error recovery line -- Source: .claude/skills/taskify/SKILL.md\n- **spec-ref** (`markdown file`): Exact content -- Source: .claude/skills/taskify/spec-reference.md\n- **writing-guide** (`markdown file`): Exact content -- Source: .claude/skills/taskify/task-writing-guide.md\n- **single-example** (`JSON file`): Valid JSON -- Source: .claude/skills/taskify/examples/single-task.json\n- **graph-example** (`JSON file`): Valid JSON -- Source: .claude/skills/taskify/examples/task-graph.json\n\n## Outputs\n- **updated-script** (`bash script`): Section 5 (file creation) added, heredocs for all 6 files -- Dest: scripts/install-taskify.sh\n\n## Constraints\n- Use quoted heredocs (cat \u003c\u003c 'EOF') to prevent variable expansion in file content\n- Respect --force and --dry-run flags\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"add-heredoc-file-creation\",\"files_scope\":[\"scripts/install-taskify.sh\"],\"effects\":\"\",\"inputs\":[{\"name\":\"agent-def\",\"type\":\"markdown file\",\"constraints\":\"Exact content of .claude/agents/taskify-agent.md\",\"source\":\".claude/agents/taskify-agent.md\"},{\"name\":\"skill-md\",\"type\":\"markdown file\",\"constraints\":\"SKILL.md with patched error recovery line\",\"source\":\".claude/skills/taskify/SKILL.md\"},{\"name\":\"spec-ref\",\"type\":\"markdown file\",\"constraints\":\"Exact content\",\"source\":\".claude/skills/taskify/spec-reference.md\"},{\"name\":\"writing-guide\",\"type\":\"markdown file\",\"constraints\":\"Exact content\",\"source\":\".claude/skills/taskify/task-writing-guide.md\"},{\"name\":\"single-example\",\"type\":\"JSON file\",\"constraints\":\"Valid JSON\",\"source\":\".claude/skills/taskify/examples/single-task.json\"},{\"name\":\"graph-example\",\"type\":\"JSON file\",\"constraints\":\"Valid JSON\",\"source\":\".claude/skills/taskify/examples/task-graph.json\"}],\"outputs\":[{\"name\":\"updated-script\",\"type\":\"bash script\",\"constraints\":\"Section 5 (file creation) added, heredocs for all 6 files\",\"destination\":\"scripts/install-taskify.sh\"}]}}","acceptance_criteria":"- Running the script on a fresh git repo creates all 6 files in correct paths under .claude/\n- The installed SKILL.md contains 'go install github.com/nixlim/task_templating/cmd/taskval@latest' in error recovery, not 'go build -o taskval ./cmd/taskval/'\n- Running the script a second time without --force skips all 6 files with 'already exists' messages\n- Running the script with --force overwrites all 6 files\n- Running with --dry-run prints file creation actions without writing files\n- Created directory structure matches: .claude/agents/, .claude/skills/taskify/examples/","notes":"This is the largest task (~640 lines). The content for each heredoc comes from the existing files in the task_templating project. The only modification is the SKILL.md error recovery patch.","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":480,"created_at":"2026-02-01T22:40:30.529828Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:51:01.983615Z","closed_at":"2026-02-01T22:51:01.983615Z","close_reason":"All 6 acceptance criteria verified: 6 files created on fresh repo, SKILL.md has patched go install, idempotent re-run skips all, --force overwrites all, --dry-run creates nothing, directory structure correct","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.3","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:30.532349Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-owk.3","depends_on_id":"task_templating-owk.2","type":"blocks","created_at":"2026-02-01T22:40:34.388804Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-owk.4","title":"Add marker-based AGENTS.md and CLAUDE.md update logic to install script","description":"The script creates or appends to AGENTS.md and CLAUDE.md in the target project using \u003c!-- taskify-begin --\u003e / \u003c!-- taskify-end --\u003e markers, with correct content as specified in LAUNCHER_PLAN.md sections 4 and 5.\n\n## Inputs\n- **agents-content** (`string`): Exact markdown from LAUNCHER_PLAN.md section 4 -- Source: LAUNCHER_PLAN.md section 4\n- **claude-content** (`string`): Exact markdown from LAUNCHER_PLAN.md section 5 -- Source: LAUNCHER_PLAN.md section 5\n\n## Outputs\n- **updated-script** (`bash script`): Sections 6-7 (AGENTS.md and CLAUDE.md update) added -- Dest: scripts/install-taskify.sh\n\n## Constraints\n- Use file_has_marker() from skeleton\n- Marker strings: \u003c!-- taskify-begin --\u003e and \u003c!-- taskify-end --\u003e\n- Never modify user content outside the markers\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"add-agents-claude-md-update\",\"files_scope\":[\"scripts/install-taskify.sh\"],\"effects\":\"\",\"inputs\":[{\"name\":\"agents-content\",\"type\":\"string\",\"constraints\":\"Exact markdown from LAUNCHER_PLAN.md section 4\",\"source\":\"LAUNCHER_PLAN.md section 4\"},{\"name\":\"claude-content\",\"type\":\"string\",\"constraints\":\"Exact markdown from LAUNCHER_PLAN.md section 5\",\"source\":\"LAUNCHER_PLAN.md section 5\"}],\"outputs\":[{\"name\":\"updated-script\",\"type\":\"bash script\",\"constraints\":\"Sections 6-7 (AGENTS.md and CLAUDE.md update) added\",\"destination\":\"scripts/install-taskify.sh\"}]}}","acceptance_criteria":"- On a project with no AGENTS.md, the script creates AGENTS.md containing the taskify section between markers\n- On a project with existing AGENTS.md lacking the marker, the script appends the taskify section\n- On a project with AGENTS.md already containing \u003c!-- taskify-begin --\u003e, the script skips with a message\n- Same three behaviors apply for CLAUDE.md\n- --force does NOT re-append if markers are already present (marker-based, not force-based)\n- The file_has_marker utility function is used for detection","status":"closed","priority":1,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T22:40:31.207948Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:55:15.373416Z","closed_at":"2026-02-01T22:55:15.373416Z","close_reason":"All 6 acceptance criteria verified: creates AGENTS.md/CLAUDE.md with markers, appends to existing files, skips when marker present, --force does not duplicate markers, file_has_marker used for detection","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.4","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:31.211272Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-owk.4","depends_on_id":"task_templating-owk.3","type":"blocks","created_at":"2026-02-01T22:40:34.981466Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-owk.5","title":"Add summary output section to the install script","description":"The script prints a final summary listing what was created/skipped and next steps for the user.\n\n## Inputs\n- **script-state** (`bash script`): All previous sections complete -- Source: scripts/install-taskify.sh\n\n## Outputs\n- **completed-script** (`bash script`): Section 8 (summary) added, script is complete -- Dest: scripts/install-taskify.sh\n\n## Constraints\n- Use log() utility for consistent formatting\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"add-summary-output\",\"files_scope\":[\"scripts/install-taskify.sh\"],\"effects\":\"\",\"inputs\":[{\"name\":\"script-state\",\"type\":\"bash script\",\"constraints\":\"All previous sections complete\",\"source\":\"scripts/install-taskify.sh\"}],\"outputs\":[{\"name\":\"completed-script\",\"type\":\"bash script\",\"constraints\":\"Section 8 (summary) added, script is complete\",\"destination\":\"scripts/install-taskify.sh\"}]}}","acceptance_criteria":"- Running the script on a fresh project prints a summary with at least: files created count, binaries installed, beads status\n- The summary includes 'Next steps' with instructions to open Claude Code and run /taskify\n- Running with --dry-run prints the summary section header but reflects dry-run status","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T22:40:31.850438Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:58:23.920176Z","closed_at":"2026-02-01T22:58:23.920176Z","close_reason":"All 3 acceptance criteria verified: summary shows files created/skipped, binaries, beads status; includes Next steps; --dry-run reflects dry-run mode","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.5","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:31.852714Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-owk.5","depends_on_id":"task_templating-owk.4","type":"blocks","created_at":"2026-02-01T22:40:35.594377Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-owk.6","title":"Create the /init skill command that invokes install-taskify.sh","description":"A /init slash command exists in .claude/skills/init/SKILL.md that delegates to scripts/install-taskify.sh with $ARGUMENTS passed as flags.\n\n## Inputs\n- **skill-spec** (`string`): Section 6 of LAUNCHER_PLAN.md -- Source: LAUNCHER_PLAN.md section 6\n\n## Outputs\n- **skill-file** (`markdown file`): Valid SKILL.md with frontmatter -- Dest: .claude/skills/init/SKILL.md\n\n## Constraints\n- Must follow Claude Code skill file format\n- disable-model-invocation must be true to prevent auto-triggering\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"create-init-skill\",\"files_scope\":[\".claude/skills/init/SKILL.md\"],\"effects\":\"\",\"inputs\":[{\"name\":\"skill-spec\",\"type\":\"string\",\"constraints\":\"Section 6 of LAUNCHER_PLAN.md\",\"source\":\"LAUNCHER_PLAN.md section 6\"}],\"outputs\":[{\"name\":\"skill-file\",\"type\":\"markdown file\",\"constraints\":\"Valid SKILL.md with frontmatter\",\"destination\":\".claude/skills/init/SKILL.md\"}]}}","acceptance_criteria":"- .claude/skills/init/SKILL.md exists with valid YAML frontmatter containing name: init\n- The frontmatter contains disable-model-invocation: true\n- The skill body instructs Claude to run scripts/install-taskify.sh with $ARGUMENTS\n- The argument-hint field is set to '\u003ctarget-project-directory\u003e'","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T22:40:32.556145Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:58:50.620119Z","closed_at":"2026-02-01T22:58:50.620119Z","close_reason":"All 4 acceptance criteria verified: SKILL.md exists with name: init, disable-model-invocation: true, references install-taskify.sh with ARGUMENTS, argument-hint set","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.6","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:32.558571Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-owk.6","depends_on_id":"task_templating-owk.5","type":"blocks","created_at":"2026-02-01T22:40:36.219943Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-owk.7","title":"Run manual smoke test of install-taskify.sh on a temporary project","description":"The installer passes all verification checks from LAUNCHER_PLAN.md section 11: fresh install creates all files, idempotent re-run skips them, --force overwrites skill files, --dry-run prints without executing.\n\n## Inputs\n- **installer** (`bash script`): Complete scripts/install-taskify.sh -- Source: scripts/install-taskify.sh\n- **test-steps** (`string`): Section 11 of LAUNCHER_PLAN.md -- Source: LAUNCHER_PLAN.md section 11\n\n## Outputs\n- **test-result** (`string`): Pass or fail with details -- Dest: Console output\n\n## Constraints\n- Use a temporary directory (/tmp/test-taskify-*) for isolation\n- Clean up the test directory after verification\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"smoke-test-installer\",\"files_scope\":[],\"effects\":\"\",\"inputs\":[{\"name\":\"installer\",\"type\":\"bash script\",\"constraints\":\"Complete scripts/install-taskify.sh\",\"source\":\"scripts/install-taskify.sh\"},{\"name\":\"test-steps\",\"type\":\"string\",\"constraints\":\"Section 11 of LAUNCHER_PLAN.md\",\"source\":\"LAUNCHER_PLAN.md section 11\"}],\"outputs\":[{\"name\":\"test-result\",\"type\":\"string\",\"constraints\":\"Pass or fail with details\",\"destination\":\"Console output\"}]}}","acceptance_criteria":"- Fresh install: all 6 skill files exist under .claude/ in the test project\n- Fresh install: AGENTS.md contains \u003c!-- taskify-begin --\u003e marker\n- Fresh install: CLAUDE.md contains \u003c!-- taskify-begin --\u003e marker\n- Fresh install: .beads/ directory exists in test project\n- Idempotent re-run: all files report 'already exists' or 'skipped'\n- --force run: skill files are overwritten, AGENTS.md/CLAUDE.md markers preserved\n- --dry-run: no files are created or modified in the test project","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":60,"created_at":"2026-02-01T22:40:33.190897Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T22:59:21.670222Z","closed_at":"2026-02-01T22:59:21.670222Z","close_reason":"Full smoke test passed: fresh install creates all 6 files + AGENTS.md + CLAUDE.md with markers, idempotent re-run skips all 8, --force overwrites 6 files but preserves markers, --dry-run creates nothing","labels":["taskval-managed"],"dependencies":[{"issue_id":"task_templating-owk.7","depends_on_id":"task_templating-owk","type":"parent-child","created_at":"2026-02-01T22:40:33.193525Z","created_by":"Igor Ryabchuk"},{"issue_id":"task_templating-owk.7","depends_on_id":"task_templating-owk.6","type":"blocks","created_at":"2026-02-01T22:40:36.838515Z","created_by":"Igor Ryabchuk"}]}
{"id":"task_templating-qt1","title":"test-silent-only","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","created_at":"2026-02-01T01:15:46.369087Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:15:54.508854Z","closed_at":"2026-02-01T01:15:54.508854Z","close_reason":"Closed"}
{"id":"task_templating-ret","title":"test-json-silent","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","created_at":"2026-02-01T01:15:49.643797Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:15:55.01074Z","closed_at":"2026-02-01T01:15:55.01074Z","close_reason":"Closed"}
{"id":"task_templating-s0o","title":"Implement discount calculation for order totals","description":"Given a price and a discount (fixed amount or percentage), return the discounted total, guaranteed non-negative.\n\n## Inputs\n- **price** (`f64`): price \u003e 0 -- Source: Order record from database\n- **discount** (`union(Fixed: f64, Percentage: f64(0..1))`): Fixed: value \u003e= 0; Percentage: 0 \u003c= value \u003c= 1 -- Source: Promotion rules engine\n\n## Outputs\n- **total** (`f64`): total \u003e= 0 -- Dest: Return value, stored to order.total_amount\n\n## Constraints\n- Pure function: no side effects, no I/O\n- Result must be clamped to 0.0 minimum (never return negative)\n- Use decimal-safe arithmetic if available in the language; document precision limits otherwise\n\n## Non-Goals\n- Do not implement tax calculation\n- Do not handle currency conversion\n- Do not persist the result (caller's responsibility)\n\n## Error Cases\n- **price is zero or negative**: Return error -\u003e invalid price: must be positive\n- **Fixed discount exceeds price**: Clamp to 0.0 (not an error) -\u003e N/A (silent clamp)\n","acceptance_criteria":"- CalculateTotal(100.0, Fixed(10.0)) == 90.0\n- CalculateTotal(100.0, Percentage(0.1)) == 90.0\n- CalculateTotal(50.0, Fixed(60.0)) == 0.0 (clamped, not negative)\n- CalculateTotal(0.01, Percentage(0.99)) \u003e 0 (no floating point underflow to negative)\n- Unit tests pass with 100% branch coverage for this function","notes":"This function is on the critical path for the order pipeline. Keep it simple and fast.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T01:15:39.465066Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:16:42.735491Z","closed_at":"2026-02-01T01:16:42.735491Z","close_reason":"Closed","labels":["taskval-managed"]}
{"id":"task_templating-ym3","title":"Implement discount calculation for order totals","description":"Given a price and a discount (fixed amount or percentage), return the discounted total, guaranteed non-negative.\n\n## Inputs\n- **price** (`f64`): price \u003e 0 -- Source: Order record from database\n- **discount** (`union(Fixed: f64, Percentage: f64(0..1))`): Fixed: value \u003e= 0; Percentage: 0 \u003c= value \u003c= 1 -- Source: Promotion rules engine\n\n## Outputs\n- **total** (`f64`): total \u003e= 0 -- Dest: Return value, stored to order.total_amount\n\n## Constraints\n- Pure function: no side effects, no I/O\n- Result must be clamped to 0.0 minimum (never return negative)\n- Use decimal-safe arithmetic if available in the language; document precision limits otherwise\n\n## Non-Goals\n- Do not implement tax calculation\n- Do not handle currency conversion\n- Do not persist the result (caller's responsibility)\n\n## Error Cases\n- **price is zero or negative**: Return error -\u003e invalid price: must be positive\n- **Fixed discount exceeds price**: Clamp to 0.0 (not an error) -\u003e N/A (silent clamp)\n","design":"{\"_template\":{\"version\":\"0.2.0\",\"task_id\":\"calculate-discounted-total\",\"files_scope\":[\"internal/pricing/discount.go\",\"internal/pricing/discount_test.go\"],\"effects\":\"None\",\"inputs\":[{\"name\":\"price\",\"type\":\"f64\",\"constraints\":\"price \\u003e 0\",\"source\":\"Order record from database\"},{\"name\":\"discount\",\"type\":\"union(Fixed: f64, Percentage: f64(0..1))\",\"constraints\":\"Fixed: value \\u003e= 0; Percentage: 0 \\u003c= value \\u003c= 1\",\"source\":\"Promotion rules engine\"}],\"outputs\":[{\"name\":\"total\",\"type\":\"f64\",\"constraints\":\"total \\u003e= 0\",\"destination\":\"Return value, stored to order.total_amount\"}]}}","acceptance_criteria":"- CalculateTotal(100.0, Fixed(10.0)) == 90.0\n- CalculateTotal(100.0, Percentage(0.1)) == 90.0\n- CalculateTotal(50.0, Fixed(60.0)) == 0.0 (clamped, not negative)\n- CalculateTotal(0.01, Percentage(0.99)) \u003e 0 (no floating point underflow to negative)\n- Unit tests pass with 100% branch coverage for this function","notes":"This function is on the critical path for the order pipeline. Keep it simple and fast.","status":"closed","priority":2,"issue_type":"task","owner":"riabtchuk@gmail.com","estimated_minutes":15,"created_at":"2026-02-01T01:16:49.405972Z","created_by":"Igor Ryabchuk","updated_at":"2026-02-01T01:17:07.483746Z","closed_at":"2026-02-01T01:17:07.483746Z","close_reason":"Closed","labels":["taskval-managed"]}
